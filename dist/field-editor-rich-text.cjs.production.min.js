"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),n=e(t),r=require("@contentful/field-editor-reference"),i=require("@contentful/field-editor-shared"),o=require("@contentful/rich-text-types"),a=require("@udecode/plate-core"),l=require("emotion"),s=e(require("fast-deep-equal")),c=e(require("lodash/noop")),u=require("@udecode/plate-serializer-docx"),d=require("@udecode/plate-break"),f=require("@udecode/plate-reset-node"),m=e(require("is-hotkey")),p=require("slate"),E=require("slate-react"),y=e(require("constate")),h=require("@contentful/f36-components"),v=e(require("lodash/find")),g=e(require("lodash/flow")),L=e(require("lodash/get")),S=require("@contentful/f36-icons"),T=e(require("@contentful/f36-tokens")),N=require("@udecode/plate-list"),C=e(require("lodash/castArray")),b=require("@udecode/plate-basic-marks"),I=e(require("is-plain-obj")),k=require("@udecode/plate-paragraph"),A=require("@udecode/plate-select"),O=require("@udecode/plate-table"),D=require("@contentful/contentful-slatejs-adapter"),B=require("@contentful/rich-text-plain-text-renderer"),x=require("@udecode/plate-trailing-block"),R=e(require("lodash/debounce")),w=e(require("prop-types"));function K(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){K(o,r,i,a,l,"next",e)}function l(e){K(o,r,i,a,l,"throw",e)}a(void 0)}))}}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function H(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,F(e,t)}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function G(e,t,n){return(G=z()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&F(i,n.prototype),i}).apply(null,arguments)}function q(e){var t="function"==typeof Map?new Map:void 0;return(q=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return G(e,arguments,M(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),F(n,e)})(e)}function j(e,t){return t||(t=e.slice(0)),e.raw=t,e}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Y(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function W(e){var t=e.field;return"rich-text-editor-"+e.entry.getSys().id+"-"+t.id+"-"+t.locale}var V=t.createContext(""),Q=V.Provider;function X(e){var n=t.useContext(V);if(e)return e;if(!n)throw new Error("could not find editor id. Please ensure the component is wrapped in <ContentfulEditorIdProvider> ");return n}function $(e){var t=X(e);return a.usePlateEditorState(t)}var Z="undefined"!=typeof navigator&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),J=/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/.test(navigator.userAgent),ee=[o.INLINES.HYPERLINK,o.INLINES.ENTRY_HYPERLINK,o.INLINES.ASSET_HYPERLINK];function te(e,t){return!!Array.from(p.Editor.nodes(e,{match:function(e){return p.Element.isElement(e)&&e.type===t}}))[0]}function ne(e){return 1===e.length}function re(e,t,n){var r,i;if(!(n=null!=(r=n)?r:null==(i=e.selection)?void 0:i.focus.path))return[];for(var o=Array.isArray(t)?t:[t],a=0;a<n.length;a++){var l=p.Editor.node(e,n.slice(0,a+1));if(o.includes(l[0].type))return l}return[]}function ie(e,t){return!!e&&!!re(e,t)[0]}function oe(e){p.Transforms.move(e,{distance:1,unit:"offset"})}function ae(e,t){p.Transforms.insertNodes(e,{type:o.BLOCKS.PARAGRAPH,children:[{text:""}],data:{},isVoid:!1},t)}function le(e,t){e.selection&&function(e,t){var n=t.text,r=t.url,i=t.target,o=t.type,a=t.path;se(e)&&!a&&ce(e);var l=e.selection,s=l&&p.Range.isCollapsed(l),c={type:o,data:{},children:s?[{text:n}]:[]};r&&(c.data={uri:r}),i&&(c.data={target:i}),a?(p.Transforms.setNodes(e,c,{at:a}),p.Transforms.insertText(e,n,{at:a}),p.Transforms.select(e,a)):s?p.Transforms.insertNodes(e,c):(p.Transforms.wrapNodes(e,c,{split:!0}),p.Transforms.delete(e),p.Transforms.insertText(e,n),p.Transforms.collapse(e,{edge:"end"}))}(e,t)}function se(e){return!!e&&!!Array.from(p.Editor.nodes(e,{match:function(e){return!p.Editor.isEditor(e)&&p.Element.isElement(e)&&ee.includes(e.type)}}))[0]}function ce(e){p.Transforms.unwrapNodes(e,{match:function(e){return!p.Editor.isEditor(e)&&p.Element.isElement(e)&&ee.includes(e.type)}})}var ue=Object.values(o.INLINES),de=function(e){return p.Text.isText(e)||p.Element.isElement(e)&&ue.includes(e.type)},fe=function(e){var t=window.scrollX,n=window.scrollY;E.ReactEditor.focus(e),Z&&setTimeout((function(){window.scrollTo(t,n)}),0)};function me(e,t,n){a.toggleNodeType(e,t,n),p.Transforms.setNodes(e,{data:{}})}function pe(e){return function(t){var r,i=(r=X(void 0),a.usePlateEditorRef(r)),o=n.useCallback((function(){return i.tracking.onViewportAction("linkRendered")}),[i]);return n.createElement(e,Object.assign({},t,{onEntityFetchComplete:o}))}}function Ee(e){var n=e.sdk;return t.useMemo((function(){return n}),[])}var ye=y(Ee),he=ye[0],ve=ye[1];function ge(e){var n=e.type,i=e.id,o=e.onEntityFetchComplete,a=r.useEntities(),l=a.getOrLoadEntry,c=a.getOrLoadAsset,u="Entry"===n?a.entries:a.assets,d=t.useState(u[i]),f=d[0],m=d[1];return t.useEffect((function(){var e=u[i];s(f,e)||m(e)}),[u,f,i]),t.useEffect((function(){("Entry"===n?l:c)(i)}),[n,i]),t.useEffect((function(){f&&(null==o||o())}),[o,f]),f}var Le=t.memo((function(e){return void 0===e.asset?t.createElement(h.AssetCard,{size:"default",isLoading:!0}):"failed"===e.asset?t.createElement(r.MissingEntityCard,{entityType:"Asset",isDisabled:e.isDisabled,onRemove:e.onRemove}):t.createElement(r.WrappedAssetCard,{getEntityScheduledActions:e.loadEntityScheduledActions,size:"small",isSelected:e.isSelected,isDisabled:e.isDisabled,localeCode:e.locale,defaultLocaleCode:e.sdk.locales.default,asset:e.asset,onEdit:e.onEdit,onRemove:e.isDisabled?void 0:e.onRemove,isClickable:!1})}),s);function Se(e){var n=e.onEntityFetchComplete,i=e.assetId,o=r.useEntities().loadEntityScheduledActions,a=ge({type:"Asset",id:i,onEntityFetchComplete:n});return t.createElement(Le,{asset:a,sdk:e.sdk,isDisabled:e.isDisabled,isSelected:e.isSelected,loadEntityScheduledActions:o,locale:e.locale,onEdit:e.onEdit,onRemove:e.onRemove})}Le.displayName="InternalAssetCard";var Te=t.memo((function(e){var n=e.entry,i=e.sdk,o=e.loadEntityScheduledActions;if(void 0===n)return t.createElement(h.EntryCard,{isLoading:!0});if("failed"===n)return t.createElement(r.MissingEntityCard,{entityType:"Entry",isDisabled:e.isDisabled,onRemove:e.onRemove});var a=i.space.getCachedContentTypes().find((function(e){return e.sys.id===n.sys.contentType.sys.id}));return t.createElement(r.WrappedEntryCard,{size:"default",getAsset:e.sdk.space.getAsset,getEntityScheduledActions:o,isSelected:e.isSelected,isDisabled:e.isDisabled,localeCode:e.locale,defaultLocaleCode:e.sdk.locales.default,contentType:a,entry:n,onEdit:e.onEdit,onRemove:e.isDisabled?void 0:e.onRemove,isClickable:!1})}),s);Te.displayName="ReferenceCard";var Ne=function(e){var n=e.entryId,i=e.onEntityFetchComplete,o=r.useEntities().loadEntityScheduledActions,a=ge({type:"Entry",id:n,onEntityFetchComplete:i});return t.createElement(Te,{entry:a,sdk:e.sdk,locale:e.locale,isDisabled:e.isDisabled,isSelected:e.isSelected,onEdit:e.onEdit,onRemove:e.onRemove,loadEntityScheduledActions:o})},Ce={root:l.css({marginBottom:"1.25rem !important",display:"block"}),container:l.css({display:"inline-block",verticalAlign:"text-top",width:"100%"})};function be(e){var t=e.attributes,r=e.children,i=e.element,o=e.onEntityFetchComplete,a=E.useSelected(),l=$(),s=ve(),c=E.useReadOnly(),u=i.data.target.sys,d=u.id,f=u.linkType,m=n.useCallback((function(){return("Asset"===f?s.navigator.openAsset:s.navigator.openEntry)(d,{slideIn:!0})}),[s,d,f]),y=n.useCallback((function(){if(l){var e=E.ReactEditor.findPath(l,i);p.Transforms.removeNodes(l,{at:e})}}),[l,i]);return n.createElement("div",Object.assign({},t,{className:Ce.root,"data-entity-type":f,"data-entity-id":d,contentEditable:!!J&&void 0,draggable:!!J||void 0}),n.createElement("div",{contentEditable:!J&&void 0,draggable:!!J||void 0,className:Ce.container},"Entry"===f&&n.createElement(Ne,{sdk:s,entryId:d,locale:s.field.locale,isDisabled:c,isSelected:a,onRemove:y,onEdit:m,onEntityFetchComplete:o}),"Asset"===f&&n.createElement(Se,{sdk:s,assetId:d,locale:s.field.locale,isDisabled:c,isSelected:a,onRemove:y,onEdit:m,onEntityFetchComplete:o})),r)}function Ie(e,t){return e(t={exports:{}},t.exports),t.exports}var ke=Ie((function(e){var t=function(e){var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=Object.create((t&&t.prototype instanceof d?t:d).prototype),o=new N(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var l=L(a,n);if(l){if(l===u)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function d(){}function f(){}function m(){}var p={};p[i]=function(){return this};var E=Object.getPrototypeOf,y=E&&E(E(C([])));y&&y!==t&&n.call(y,i)&&(p=y);var h=m.prototype=d.prototype=Object.create(p);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,l){var s=c(e[i],e,o);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(s.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function L(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,L(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:b}}function b(){return{value:void 0,done:!0}}return f.prototype=h.constructor=m,m.constructor=f,f.displayName=l(m,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,a,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},v(g.prototype),g.prototype[o]=function(){return this},e.AsyncIterator=g,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new g(s(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(h),l(h,a,"Generator"),h[i]=function(){return this},h.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(l&&s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function Ae(e,t){return g((function(e){return v(e,"nodes")}),(function(e){return L(e,["nodes",t])}),(function(e){return v(e,"linkContentType")}),(function(e){return L(e,"linkContentType",[])}))(e.validations)}function Oe(e,t){return{entityType:De(t),locale:e.locale||null,contentTypes:Ae(e,t)}}function De(e){var t=e.split("-");if(-1!==t.indexOf("entry"))return"Entry";if(-1!==t.indexOf("asset"))return"Asset";throw new Error("RichText node type `"+e+"` has no associated `entityType`")}function Be(e,t,n,r){return xe.apply(this,arguments)}function xe(){return(xe=_(ke.mark((function e(t,n,r,i){var o,a,l,s,c,u;return ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i("openCreateEmbedDialog",{nodeType:t}),o=n.dialogs,a=Oe(n.field,t),l="Asset"===a.entityType?o.selectSingleAsset:o.selectSingleEntry,s=P({},a,{withCreate:!0}),c=r.selection,e.next=8,l(s);case 8:if(u=e.sent){e.next=12;break}return i("cancelCreateEmbedDialog",{nodeType:t}),e.abrupt("return");case 12:p.Transforms.select(r,c),we(r,t,u),Re(r),i("insert",{nodeType:t});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e){var t=p.Editor.next(e);if(!t)return ae(e);var n=p.Editor.above(e,{voids:!1,match:function(e){return!p.Element.isElement(e)||![o.BLOCKS.EMBEDDED_ASSET,o.BLOCKS.EMBEDDED_ENTRY].includes(e.type)}});if(p.Editor.isEditor(n))oe(e);else{var r=p.Editor.above(e,{at:t[1],match:function(e){return p.Element.isElement(e)&&o.TEXT_CONTAINERS.includes(e.type)}});if(!r||!n||!p.Path.isChild(r[1],n[1]))return ae(e);oe(e)}}function we(e,t,n){if(null!=e&&e.selection){var r=function(e,t){return{type:e,data:{target:{sys:{id:t.sys.id,type:"Link",linkType:t.sys.type}}},children:[{text:""}],isVoid:!0}}(t,n);e.selection&&a.getText(e,e.selection.focus.path)?p.Transforms.insertNodes(e,r):p.Transforms.setNodes(e,r),fe(e)}}var Ke,_e=l.css({marginRight:"10px"});function Pe(e){var t=e.isDisabled,r=e.nodeType,i=e.onClose,o=$(),a=ve(),l=function(){var e=_(ke.mark((function e(t){return ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i(),e.next=4,Be(r,a,o,o.tracking.onToolbarAction);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(e){var t=e.toLowerCase().split("-");if(t.includes("entry"))return"Entry";if(t.includes("asset"))return"Asset";throw new Error("Node type `"+e+"` has no associated `entityType`")}(r);return n.createElement(h.Menu.Item,{disabled:t,className:"rich-text__"+r+"-list-item",onClick:l,testId:"toolbar-toggle-"+r},n.createElement(h.Flex,{alignItems:"center",flexDirection:"row"},n.createElement(h.Icon,{as:"Asset"===s?S.AssetIcon:S.EmbeddedEntryBlockIcon,className:"rich-text__embedded-entry-list-icon "+_e,variant:"secondary"}),n.createElement("span",null,s)))}var He=((Ke={})[o.BLOCKS.EMBEDDED_ENTRY]="Entry",Ke[o.BLOCKS.EMBEDDED_ASSET]="Asset",Ke);function Me(e,t){return function(n,r){var i=r.options.hotkey;return function(r){var o=re(n,e)[1];o?("Delete"===r.key||"Backspace"===r.key)&&(r.preventDefault(),p.Transforms.removeNodes(n,{at:o})):i&&m(i,r)&&Be(e,t,n,n.tracking.onShortcutAction)}}}var Fe=function(e,t){return function(n){return{key:e,type:e,isElement:!0,isVoid:!0,component:pe(be),options:{hotkey:t},handlers:{onKeyDown:Me(e,n)},deserializeHtml:{rules:[{validAttribute:{"data-entity-type":He[e]}}],withoutChildren:!0,getNode:function(t){return{type:e,children:[{text:""}],isVoid:!0,data:{target:{sys:{id:t.getAttribute("data-entity-id"),linkType:t.getAttribute("data-entity-type"),type:"Link"}}}}}}}}},ze=Fe(o.BLOCKS.EMBEDDED_ENTRY,"mod+shift+e"),Ge=Fe(o.BLOCKS.EMBEDDED_ASSET,"mod+shift+a"),qe=i.entityHelpers.getEntryTitle,je=i.entityHelpers.getEntryStatus,Ye={scheduledIcon:l.css({verticalAlign:"text-bottom",marginRight:T.spacing2Xs})};function Ue(e){var t=r.useEntities(),i=t.getOrLoadEntry,a=t.loadEntityScheduledActions,l=t.entries,s=n.useMemo((function(){return l[e.entryId]}),[l,e.entryId]),c=e.sdk.space.getCachedContentTypes(),u=e.onEntityFetchComplete,d=n.useMemo((function(){if(s&&"failed"!==s&&c)return c.find((function(e){return e.sys.id===s.sys.contentType.sys.id}))}),[c,s]);n.useEffect((function(){s&&(null==u||u())}),[s,u]);var f=d?d.name:"",m=n.useMemo((function(){return qe({entry:s,contentType:d,localeCode:e.sdk.field.locale,defaultLocaleCode:e.sdk.locales.default,defaultTitle:"Untitled"})}),[s,d,e.sdk.field.locale,e.sdk.locales.default]);if(n.useEffect((function(){e.entryId&&i(e.entryId)}),[e.entryId]),"failed"===s)return n.createElement(h.InlineEntryCard,{title:"Entry missing or inaccessible",testId:o.INLINES.EMBEDDED_ENTRY,isSelected:e.isSelected});if(void 0===s)return n.createElement(h.InlineEntryCard,{isLoading:!0});var p=je(s.sys);return"deleted"===p?n.createElement(h.InlineEntryCard,{title:"Entry missing or inaccessible",testId:o.INLINES.EMBEDDED_ENTRY,isSelected:e.isSelected,actions:[n.createElement(h.MenuItem,{key:"remove",onClick:e.onRemove,testId:"delete"},"Remove")]}):n.createElement(h.InlineEntryCard,{testId:o.INLINES.EMBEDDED_ENTRY,isSelected:e.isSelected,title:f+": "+m,status:p,actions:[n.createElement(h.MenuItem,{key:"edit",onClick:e.onEdit},"Edit"),n.createElement(h.MenuItem,{key:"remove",onClick:e.onRemove,disabled:e.isDisabled,testId:"delete"},"Remove")]},n.createElement(r.ScheduledIconWithTooltip,{getEntityScheduledActions:a,entityType:"Entry",entityId:s.sys.id},n.createElement(S.ClockIcon,{className:Ye.scheduledIcon,variant:"muted",testId:"scheduled-icon"})),n.createElement(h.Text,null,m))}function We(e){return{type:o.INLINES.EMBEDDED_ENTRY,children:[{text:""}],data:{target:{sys:{id:e,type:"Link",linkType:"Entry"}}}}}var Ve={icon:l.css({marginRight:"10px"}),root:l.css({display:"inline-block",margin:"0 "+T.spacing2Xs,fontSize:"inherit",span:{userSelect:"none"}})};function Qe(e){var n=$(),r=ve(),i=E.useSelected(),o=e.element.data.target.sys.id,a=E.useReadOnly();return t.createElement("span",Object.assign({},e.attributes,{className:Ve.root,"data-embedded-entity-inline-id":o,contentEditable:!!J&&void 0,draggable:!!J||void 0}),t.createElement("span",{contentEditable:!J&&void 0,draggable:!!J||void 0},t.createElement(Ue,{sdk:r,entryId:o,isSelected:i,isDisabled:a,onRemove:function(){if(n){var t=E.ReactEditor.findPath(n,e.element);p.Transforms.removeNodes(n,{at:t})}},onEdit:function(){return r.navigator.openEntry(o,{slideIn:!0})},onEntityFetchComplete:e.onEntityFetchComplete})),e.children)}function Xe(e,t,n){return $e.apply(this,arguments)}function $e(){return($e=_(ke.mark((function e(t,n,r){var i,a,l,s;return ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r("openCreateEmbedDialog",{nodeType:o.INLINES.EMBEDDED_ENTRY}),i=P({},Oe(n.field,o.INLINES.EMBEDDED_ENTRY),{withCreate:!0}),a=t.selection,e.next=5,n.dialogs.selectSingleEntry(i);case 5:if(l=e.sent,fe(t),l){e.next=10;break}return r("cancelCreateEmbedDialog",{nodeType:o.INLINES.EMBEDDED_ENTRY}),e.abrupt("return");case 10:return s=We(l.sys.id),r("insert",{nodeType:o.INLINES.EMBEDDED_ENTRY}),e.abrupt("return",new Promise((function(e){setTimeout((function(){p.Transforms.setSelection(t,a),p.Transforms.insertNodes(t,s),e()}),0)})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e){var n=$(),r=ve();function i(){return(i=_(ke.mark((function t(i){return ke.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.preventDefault(),n){t.next=3;break}return t.abrupt("return");case 3:return e.onClose(),t.next=6,Xe(n,r,n.tracking.onToolbarAction);case 6:oe(n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return t.createElement(h.Menu.Item,{disabled:e.isDisabled,className:"rich-text__entry-link-block-button",testId:"toolbar-toggle-"+o.INLINES.EMBEDDED_ENTRY,onClick:function(e){return i.apply(this,arguments)}},t.createElement(h.Flex,{alignItems:"center",flexDirection:"row"},t.createElement(S.EmbeddedEntryInlineIcon,{variant:"secondary",className:"rich-text__embedded-entry-list-icon "+Ve.icon}),t.createElement("span",null,"Inline entry")))}function Je(e){return{key:o.INLINES.EMBEDDED_ENTRY,type:o.INLINES.EMBEDDED_ENTRY,isElement:!0,isInline:!0,isVoid:!0,component:pe(Qe),options:{hotkey:"mod+shift+2"},handlers:{onKeyDown:et(e)},deserializeHtml:{rules:[{validAttribute:"data-embedded-entity-inline-id"}],withoutChildren:!0,getNode:function(e){return We(e.getAttribute("data-embedded-entity-inline-id"))}}}}function et(e){return function(t,n){var r=n.options.hotkey;return function(n){t&&r&&m(r,n)&&Xe(t,e,t.tracking.onShortcutAction)}}}var tt,nt,rt,it,ot,at,lt,st,ct,ut,dt=[o.BLOCKS.DOCUMENT,o.BLOCKS.PARAGRAPH,"text"],ft=function(e,t,n){var r=function(e,t){return g((function(e){return v(e,t)}),(function(e){return L(e,t)}))(e.validations)}(e,t);return void 0===r||dt.concat(r).includes(n)},mt=function(e,t){return ft(e,"enabledNodeTypes",t)},pt=function(e,t){return ft(e,"enabledMarks",t)},Et={dropdown:(ct={root:l.css(tt||(tt=j(["\n      font-weight: ",";\n    "])),T.fontWeightDemiBold)},ct[o.BLOCKS.PARAGRAPH]=l.css(nt||(nt=j(["\n      font-size: ",";\n    "])),T.fontSizeL),ct[o.BLOCKS.HEADING_1]=l.css(rt||(rt=j(["\n      font-size: 1.625rem;\n    "]))),ct[o.BLOCKS.HEADING_2]=l.css(it||(it=j(["\n      font-size: 1.4375rem;\n    "]))),ct[o.BLOCKS.HEADING_3]=l.css(ot||(ot=j(["\n      font-size: 1.25rem;\n    "]))),ct[o.BLOCKS.HEADING_4]=l.css(at||(at=j(["\n      font-size: 1.125rem;\n    "]))),ct[o.BLOCKS.HEADING_5]=l.css(lt||(lt=j(["\n      font-size: 1rem;\n    "]))),ct[o.BLOCKS.HEADING_6]=l.css(st||(st=j(["\n      font-size: 0.875rem;\n    "]))),ct)},yt=((ut={})[o.BLOCKS.PARAGRAPH]="Normal text",ut[o.BLOCKS.HEADING_1]="Heading 1",ut[o.BLOCKS.HEADING_2]="Heading 2",ut[o.BLOCKS.HEADING_3]="Heading 3",ut[o.BLOCKS.HEADING_4]="Heading 4",ut[o.BLOCKS.HEADING_5]="Heading 5",ut[o.BLOCKS.HEADING_6]="Heading 6",ut);function ht(e){var n=ve(),r=$(),i=t.useState(!1),a=i[0],s=i[1],c=t.useState(o.BLOCKS.PARAGRAPH),u=c[0],d=c[1];t.useEffect((function(){if(null!=r&&r.selection){var e=function(e){return e.selection?Array.from(p.Editor.nodes(e,{at:e.selection,match:function(e){return p.Element.isElement(e)}})).flat():[]}(r)[0].type;d(yt[e]?e:o.BLOCKS.PARAGRAPH)}}),[null==r?void 0:r.operations,null==r?void 0:r.selection]);var f=t.useMemo((function(){var e=Object.fromEntries(Object.keys(yt).map((function(e){return[e,mt(n.field,e)]})));return[e,Object.values(e).filter(Boolean).length>0]}),[n.field]),m=f[0],E=f[1];return r?t.createElement(h.Menu,{isOpen:a,onClose:function(){return s(!1)}},t.createElement(h.Menu.Trigger,null,t.createElement(h.Button,{size:"small",testId:"toolbar-heading-toggle",variant:"transparent",endIcon:t.createElement(S.ChevronDownIcon,null),isDisabled:e.isDisabled,onClick:function(){return E&&s(!a)}},yt[u])),t.createElement(h.Menu.List,{testId:"dropdown-heading-list"}," ",Object.keys(yt).map((function(n){return m[n]&&t.createElement(h.Menu.Item,{key:n,isInitiallyFocused:u===n,onClick:(i=n,function(e){if(e.preventDefault(),null!=r&&r.selection){d(i),s(!1);var t=r.onChange;r.onChange=function(){fe(r),r.onChange=t,t.apply(void 0,arguments)};var n=te(r,i);r.tracking.onToolbarAction(n?"remove":"insert",{nodeType:i}),me(r,{activeType:i,inactiveType:i})}}),testId:"dropdown-option-"+n,disabled:e.isDisabled},t.createElement("span",{className:l.cx(Et.dropdown.root,Et.dropdown[n])},yt[n]));var i})).filter(Boolean))):null}var vt,gt,Lt,St,Tt,Nt,Ct,bt,It,kt,At,Ot,Dt,Bt,xt,Rt,wt,Kt,_t=function(e,t){p.Transforms.removeNodes(e,{at:t[1]})},Pt=function(e,t){var n=t[1],r=function(e,t){return function(e,t,n){return Array.from(a.getNodes(e,{match:{type:o.TEXT_CONTAINERS},at:t,mode:"lowest"})).map((function(e){return e[0]}))}(e,t).map((function(e){return P({},e,{type:o.BLOCKS.PARAGRAPH})}))}(e,n);_t(e,t),p.Transforms.insertNodes(e,r,{at:n})},Ht=function(e,t){p.Transforms.unwrapNodes(e,{at:t[1]})},Mt=function(e){return function(t,n){p.Transforms.wrapNodes(t,{type:e,data:{},children:[]},{at:n[1]})}},Ft=function(e,t){p.Transforms.liftNodes(e,{at:t[1]})},zt={dropdown:(It={root:l.css(vt||(vt=j(["\n      font-weight: ",";\n    "])),T.fontWeightDemiBold)},It[o.BLOCKS.PARAGRAPH]=l.css(gt||(gt=j(["\n      font-size: ",";\n    "])),T.fontSizeL),It[o.BLOCKS.HEADING_1]=l.css(Lt||(Lt=j(["\n      font-size: 1.625rem;\n    "]))),It[o.BLOCKS.HEADING_2]=l.css(St||(St=j(["\n      font-size: 1.4375rem;\n    "]))),It[o.BLOCKS.HEADING_3]=l.css(Tt||(Tt=j(["\n      font-size: 1.25rem;\n    "]))),It[o.BLOCKS.HEADING_4]=l.css(Nt||(Nt=j(["\n      font-size: 1.125rem;\n    "]))),It[o.BLOCKS.HEADING_5]=l.css(Ct||(Ct=j(["\n      font-size: 1rem;\n    "]))),It[o.BLOCKS.HEADING_6]=l.css(bt||(bt=j(["\n      font-size: 0.875rem;\n    "]))),It),headings:(wt={root:l.css(kt||(kt=j(["\n      font-weight: ",";\n      line-height: 1.3;\n      margin: 0 0 ",";\n    "])),T.fontWeightMedium,T.spacingS)},wt[o.BLOCKS.HEADING_1]=l.css(At||(At=j(["\n      font-size: 1.875rem;\n    "]))),wt[o.BLOCKS.HEADING_2]=l.css(Ot||(Ot=j(["\n      font-size: 1.5625rem;\n    "]))),wt[o.BLOCKS.HEADING_3]=l.css(Dt||(Dt=j(["\n      font-size: 1.375rem;\n    "]))),wt[o.BLOCKS.HEADING_4]=l.css(Bt||(Bt=j(["\n      font-size: 1.25rem;\n    "]))),wt[o.BLOCKS.HEADING_5]=l.css(xt||(xt=j(["\n      font-size: 1.125rem;\n    "]))),wt[o.BLOCKS.HEADING_6]=l.css(Rt||(Rt=j(["\n      font-size: 1rem;\n    "]))),wt)};function Gt(e,n){return function(r){return t.createElement(e,Object.assign({},r.attributes,{className:l.cx(zt.headings.root,zt.headings[n])}),r.children)}}var qt,jt,Yt,Ut=((Kt={})[o.BLOCKS.HEADING_1]=t.memo(Gt("h1",o.BLOCKS.HEADING_1)),Kt[o.BLOCKS.HEADING_2]=t.memo(Gt("h2",o.BLOCKS.HEADING_2)),Kt[o.BLOCKS.HEADING_3]=t.memo(Gt("h3",o.BLOCKS.HEADING_3)),Kt[o.BLOCKS.HEADING_4]=t.memo(Gt("h4",o.BLOCKS.HEADING_4)),Kt[o.BLOCKS.HEADING_5]=t.memo(Gt("h5",o.BLOCKS.HEADING_5)),Kt[o.BLOCKS.HEADING_6]=t.memo(Gt("h6",o.BLOCKS.HEADING_6)),Kt),Wt=function(){var e;return{key:"HeadingPlugin",softBreak:[{hotkey:"shift+enter",query:{allow:o.HEADINGS}}],normalizer:[{match:{type:o.HEADINGS},validChildren:function(e,t){return de(t[0])},transform:(e={},e[o.BLOCKS.PARAGRAPH]=Ht,e.default=Ft,e)}],then:function(e){return{exitBreak:[{hotkey:"enter",query:{allow:o.HEADINGS,end:!0,start:!0,filter:function(t){return!a.getAbove(e,{at:t[1],match:{type:o.BLOCKS.LIST_ITEM}})}}}]}},plugins:o.HEADINGS.map((function(e,t){var n,r=t+1;return{key:e,type:e,isElement:!0,component:Ut[e],options:{hotkey:["mod+alt+"+r]},handlers:{onKeyDown:(n=e,function(e,t){var r=t.options.hotkey;return function(t){if(e.selection&&r&&m(r,t)){var i=te(e,n);e.tracking.onShortcutAction(i?"remove":"insert",{nodeType:n}),me(e,{activeType:n,inactiveType:o.BLOCKS.PARAGRAPH})}}})},deserializeHtml:{rules:[{validNodeName:("h"+r).toUpperCase()}]}}}))}},Vt={button:l.css({height:"30px",width:"30px",marginLeft:T.spacing2Xs,marginRight:T.spacing2Xs}),tooltip:l.css({zIndex:Number(T.zIndexTooltip)})};function Qt(e){var t=e.title,r=e.testId,i=e.isActive,o=e.children,a=e.isDisabled,s=void 0!==a&&a,c=n.createElement(h.Button,{className:l.cx(Vt.button,e.className),isDisabled:s,startIcon:o,onClick:function(t){t.preventDefault(),e.onClick()},testId:r,variant:i?"secondary":"transparent",size:"small"});return t?n.createElement(h.Tooltip,{className:Vt.tooltip,placement:"bottom",content:t},c):c}var Xt={container:l.css(qt||(qt=j(["\n    margin: 0 0 ",";\n  "])),T.spacingL),hr:l.css(jt||(jt=j(["\n    margin: 0;\n    height: ",";\n    background: transparent;\n    position: relative;\n    border: 0;\n    user-select: none;\n    &:hover {\n      cursor: pointer;\n    }\n    &::after {\n      content: '';\n      position: absolute;\n      width: 100%;\n      height: 1px;\n      background: ",";\n      top: 50%;\n    }\n  "])),T.spacingM,T.gray300),hrSelected:l.css(Yt||(Yt=j(["\n    &::after {\n      background: ",";\n      -webkit-box-shadow: 0px 0px 5px ",";\n      box-shadow: 0px 0px 5px ",";\n    }\n  "])),T.colorPrimary,T.colorPrimary,T.colorPrimary)};function $t(e){return function(t){if(e){var n=re(e,o.BLOCKS.HR)[1];n&&("Backspace"===t.key||"Delete"===t.key)&&(t.preventDefault(),p.Transforms.removeNodes(e,{at:n}))}}}function Zt(e){var n=$();return n?t.createElement(Qt,{title:"HR",isDisabled:e.isDisabled,onClick:function(){if(null!=n&&n.selection){var e={type:o.BLOCKS.HR,data:{},children:[{text:""}],isVoid:!0};a.getText(n,n.selection.focus.path)?p.Transforms.insertNodes(n,e):a.setNodes(n,e),function(e){p.Transforms.move(e,{distance:1,unit:"line"})}(n),fe(n)}},testId:"hr-toolbar-button",isActive:te(n,o.BLOCKS.HR)},t.createElement(S.HorizontalRuleIcon,null)):null}function Jt(e){var n=E.useSelected(),r=E.useFocused();return t.createElement("div",Object.assign({},e.attributes,{className:Xt.container,"data-void-element":o.BLOCKS.HR}),t.createElement("div",{draggable:!0,contentEditable:!1},t.createElement("hr",{className:l.cx(Xt.hr,n&&r?Xt.hrSelected:void 0)})),e.children)}var en,tn,nn,rn={removeSelectionLabel:l.css(en||(en=j(["\n    margin-left: ",";\n  "])),T.spacingS)},on=((tn={})[o.INLINES.ENTRY_HYPERLINK]="Entry",tn[o.INLINES.ASSET_HYPERLINK]="Asset",tn),an=((nn={})[o.INLINES.HYPERLINK]="URL",nn[o.INLINES.ENTRY_HYPERLINK]="Entry",nn[o.INLINES.ASSET_HYPERLINK]="Asset",nn);function ln(e){var n,i,a,l,s=ee.filter((function(t){return mt(e.sdk.field,t)})),c=s[0],u=t.useState(null!=(n=e.linkText)?n:""),d=u[0],f=u[1],m=t.useState(null!=(i=e.linkType)?i:c),p=m[0],E=m[1],y=t.useState(null!=(a=e.linkTarget)?a:""),v=y[0],g=y[1],L=t.useState(null!=(l=e.linkEntity)?l:null),S=L[0],T=L[1];function N(e){var t=e.sys;return{sys:{id:t.id,type:"Link",linkType:t.type}}}function C(){return(C=_(ke.mark((function t(){var n,r;return ke.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={locale:e.sdk.field.locale,contentTypes:Ae(e.sdk.field,o.INLINES.ENTRY_HYPERLINK)},t.next=3,e.sdk.dialogs.selectSingleEntry(n);case 3:r=t.sent,g(""),T(N(r));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return(b=_(ke.mark((function t(){var n,r;return ke.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={locale:e.sdk.field.locale},t.next=3,e.sdk.dialogs.selectSingleAsset(n);case 3:r=t.sent,g(""),T(N(r));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return t.createElement(r.EntityProvider,{sdk:e.sdk},t.createElement(t.Fragment,null,t.createElement(h.ModalContent,null,t.createElement(h.Form,null,!e.linkType&&t.createElement(h.FormControl,{id:"link-text",isRequired:!0},t.createElement(h.FormControl.Label,null,"Link text"),t.createElement(h.TextInput,{testId:"link-text-input",name:"link-text",value:d,onChange:function(e){return f(e.target.value)}})),s.length>1&&t.createElement(h.FormControl,{id:"link-type"},t.createElement(h.FormControl.Label,null,"Link type"),t.createElement(h.Select,{value:p,onChange:function(e){return E(e.target.value)},testId:"link-type-input",isDisabled:e.readonly},s.map((function(e){return t.createElement(h.Select.Option,{key:e,value:e},an[e])})))),p===o.INLINES.HYPERLINK&&t.createElement(h.FormControl,{id:"linkTarget",isRequired:!0},t.createElement(h.FormControl.Label,null,"Link target"),t.createElement(h.TextInput,{name:"linkTarget",value:v,onChange:function(e){T(null),g(e.target.value)},testId:"link-target-input",isDisabled:e.readonly}),t.createElement(h.FormControl.HelpText,null,"A protocol may be required, e.g. https://")),p!==o.INLINES.HYPERLINK&&t.createElement("div",null,t.createElement(h.FormLabel,{isRequired:!0,htmlFor:""},"Link target"," "),S&&S.sys.linkType===on[p]?t.createElement(t.Fragment,null,!e.readonly&&t.createElement(h.TextLink,{testId:"entity-selection-link",onClick:function(e){e.preventDefault(),T(null)},className:rn.removeSelectionLabel},"Remove selection"),t.createElement("div",null,p===o.INLINES.ENTRY_HYPERLINK&&t.createElement(Ne,{sdk:e.sdk,locale:e.sdk.field.locale,entryId:S.sys.id,isDisabled:!0,isSelected:!1}),p===o.INLINES.ASSET_HYPERLINK&&t.createElement(Se,{sdk:e.sdk,locale:e.sdk.field.locale,assetId:S.sys.id,isDisabled:!0,isSelected:!1}))):t.createElement("div",null,p===o.INLINES.ENTRY_HYPERLINK&&t.createElement(h.TextLink,{testId:"entity-selection-link",onClick:function(){return C.apply(this,arguments)}},"Select entry"),p===o.INLINES.ASSET_HYPERLINK&&t.createElement(h.TextLink,{testId:"entity-selection-link",onClick:function(){return b.apply(this,arguments)}},"Select asset"))))),t.createElement(h.ModalControls,null,t.createElement(h.Button,{type:"button",onClick:function(){return e.onClose(null)},variant:"secondary",testId:"cancel-cta",size:"small"},"Cancel"),t.createElement(h.Button,{type:"submit",variant:"positive",size:"small",isDisabled:e.readonly||!(p===o.INLINES.HYPERLINK?d&&v:Object.keys(on).includes(p)&&d&&S),onClick:function(t){t.preventDefault(),e.onClose({linkText:d,linkType:p,linkTarget:v,linkEntity:S})},testId:"confirm-cta"},e.linkType?"Update":"Insert"))))}function sn(e,t,n,r){return cn.apply(this,arguments)}function cn(){return(cn=_(ke.mark((function e(n,r,o,a){var l,s,c,u,d,f,m,y,h,v,g,L,S,T,N,C,b,I;return ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=E.ReactEditor.isReadOnly(n),c=n.selection?P({},n.selection):void 0,a||c){e.next=4;break}return e.abrupt("return");case 4:return y=re(n,ee,a),v=y[1],(h=y[0])&&v&&(u=h.type,d=p.Editor.string(n,v),f=h.data.uri||"",m=h.data.target),g=null!=a?a:c,L=d||(n.selection?p.Editor.string(n,n.selection):""),S=Boolean(h&&v),o(S?"openEditHyperlinkDialog":"openCreateHyperlinkDialog"),e.next=12,i.ModalDialogLauncher.openDialog({title:S?"Edit hyperlink":"Insert hyperlink",width:"large",shouldCloseOnEscapePress:!0,shouldCloseOnOverlayClick:!0,allowHeightOverflow:!0},(function(e){return t.createElement(ln,{linkTarget:f,linkText:L,linkType:u,linkEntity:m,onClose:e.onClose,sdk:r,readonly:s})}));case 12:if(T=e.sent,p.Transforms.select(n,g),T){e.next=18;break}return fe(n),o(S?"cancelEditHyperlinkDialog":"cancelCreateHyperlinkDialog"),e.abrupt("return");case 18:N=T.linkText,C=T.linkTarget,b=T.linkType,I=T.linkEntity,p.Editor.withoutNormalizing(n,(function(){le(n,{text:N,url:C,type:b,target:I,path:v})})),o(S?"edit":"insert",{nodeType:b,linkType:null!=(l=null==I?void 0:I.sys.linkType)?l:"uri"}),fe(n);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function un(e){var n=$(),r=!(!n||!se(n)),i=ve();function o(){return(o=_(ke.mark((function e(){return ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:r?(ce(n),n.tracking.onToolbarAction("unlinkHyperlinks")):sn(n,i,n.tracking.onToolbarAction);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n?t.createElement(Qt,{title:"Hyperlink",testId:"hyperlink-toolbar-button",onClick:function(){return o.apply(this,arguments)},isActive:r,isDisabled:e.isDisabled},t.createElement(S.LinkIcon,null)):null}var dn=function(e,t){var n=t[0];return!a.isAncestorEmpty(e,n)&&""!==p.Node.string(n).trim()};function fn(){return(fn=_(ke.mark((function e(t){var n,r,o,a,l,s,c,u,d,f,m,p,E;return ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.sdk,r=t.entityId,a=t.localeCode,l=t.defaultLocaleCode,c="Entry"===(o=t.entityType)?n.space.getEntry:n.space.getAsset,e.next=4,c(r);case 4:return(u=e.sent).sys.contentType&&(d=u.sys.contentType.sys.id,s=n.space.getCachedContentTypes().find((function(e){return e.sys.id===d}))),f="Entry"===o?i.entityHelpers.getEntryTitle({entry:u,contentType:s,localeCode:a,defaultLocaleCode:l,defaultTitle:"Untitled"}):i.entityHelpers.getAssetTitle({asset:u,localeCode:a,defaultLocaleCode:l,defaultTitle:"Untitled"}),m=i.entityHelpers.getEntityDescription({entity:u,contentType:s,localeCode:a,defaultLocaleCode:l}),e.next=10,n.space.getEntityScheduledActions(o,r);case 10:return p=e.sent,E=i.entityHelpers.getEntryStatus(u.sys),e.abrupt("return",{jobs:p,entity:u,entityTitle:f,entityDescription:m,entityStatus:E,contentTypeName:s?s.name:""});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mn={hyperlinkWrapper:l.css({display:"inline",position:"static",a:{fontSize:"inherit !important"}}),hyperlink:l.css({fontSize:"inherit !important",display:"inline !important","&:hover":{fill:T.gray900},"&:focus":{fill:T.gray900}})};function pn(e){var n=$(),i=ve(),o=e.element.data.target,a=function(e){var n,i,o,a,l,s,c,u=(i=(n=e).sdk,o=n.target,a=n.onEntityFetchComplete,s=(l=t.useState({type:"loading"}))[0],c=l[1],t.useEffect((function(){var e,t;o&&function(e){return fn.apply(this,arguments)}({sdk:i,entityId:null==o||null==(e=o.sys)?void 0:e.id,entityType:null==o||null==(t=o.sys)?void 0:t.linkType,localeCode:i.field.locale,defaultLocaleCode:i.locales.default}).then((function(e){c({type:"success",data:e})})).catch((function(e){console.log(e),c({type:"error",error:e})})).finally((function(){null==a||a()}))}),[i,o,a]),s),d=e.target.sys.linkType;return"loading"===u.type?"Loading "+d.toLowerCase()+"...":"error"===u.type?d+" missing or inaccessible":function(e){if(!e)return"";var t,n=e.entityStatus,i=e.jobs;return(e.contentTypeName||"Asset")+' "'+(("string"==typeof(t=e.entityTitle)&&t.length>60?t&&t.substr(0,61).replace(/(\s+\S(?=\S)|\s*)\.?.$/,"…"):t)||"Untitled")+'", '+n+" "+(i.length>0?r.getScheduleTooltipContent({job:i[0],jobsCount:i.length}):"")}(u.data)}({target:o,sdk:i,onEntityFetchComplete:e.onEntityFetchComplete});return o?t.createElement(h.Tooltip,{content:a,targetWrapperClassName:mn.hyperlinkWrapper,placement:"bottom",maxWidth:"auto"},t.createElement(h.TextLink,{as:"a",onClick:function(e){if(e.preventDefault(),e.stopPropagation(),n){var t=E.ReactEditor.toSlatePoint(n,[e.target,0],{exactMatch:!1,suppressThrow:!1});sn(n,i,n.tracking.onViewportAction,t.path)}},className:mn.hyperlink,"data-link-type":o.sys.linkType,"data-link-id":o.sys.id},e.children)):null}function En(e){var n=$(),r=ve(),i=e.element.data.uri;return t.createElement(h.Tooltip,{content:i,targetWrapperClassName:mn.hyperlinkWrapper,placement:"bottom",maxWidth:"auto"},t.createElement(h.TextLink,{as:"a",href:i,rel:"noopener noreferrer",onClick:function(e){if(e.preventDefault(),e.stopPropagation(),n){var t=E.ReactEditor.toSlatePoint(n,[e.target,0],{exactMatch:!1,suppressThrow:!1});sn(n,r,n.tracking.onViewportAction,t.path)}},className:mn.hyperlink},e.children))}var yn,hn,vn,gn,Ln=function(e){return"A"===e.nodeName&&"Entry"===e.getAttribute("data-link-type")},Sn=function(e){return"A"===e.nodeName&&"Asset"===e.getAttribute("data-link-type")},Tn=function(e){return function(t,n){var r=n.options.hotkey;return function(n){t.selection&&(r&&!m(r,n)||(se(t)?(ce(t),t.tracking.onShortcutAction("unlinkHyperlinks")):sn(t,e,t.tracking.onShortcutAction)))}}},Nn=function(e){return function(t,n){return{type:e,children:n.children,data:e===o.INLINES.HYPERLINK?{uri:t.getAttribute("href")}:{target:{sys:{id:t.getAttribute("data-link-id"),linkType:t.getAttribute("data-link-type"),type:"Link"}}}}}},Cn=function(e){var t={isElement:!0,isInline:!0};return{key:"HyperlinkPlugin",options:{hotkey:"mod+k"},handlers:{onKeyDown:Tn(e)},plugins:[P({},t,{key:o.INLINES.HYPERLINK,type:o.INLINES.HYPERLINK,component:En,deserializeHtml:{rules:[{validNodeName:["A"]}],query:function(e){return!("A"!==(t=e).nodeName||!t.getAttribute("href")||"#"===t.getAttribute("href")||Ln(e)||Sn(e));var t},getNode:Nn(o.INLINES.HYPERLINK)}}),P({},t,{key:o.INLINES.ENTRY_HYPERLINK,type:o.INLINES.ENTRY_HYPERLINK,component:pe(pn),deserializeHtml:{rules:[{validNodeName:["A"]}],query:function(e){return Ln(e)},getNode:Nn(o.INLINES.ENTRY_HYPERLINK)}}),P({},t,{key:o.INLINES.ASSET_HYPERLINK,type:o.INLINES.ASSET_HYPERLINK,component:pe(pn),deserializeHtml:{rules:[{validNodeName:["A"]}],query:function(e){return Sn(e)},getNode:Nn(o.INLINES.ASSET_HYPERLINK)}})],normalizer:[{match:{type:[o.INLINES.HYPERLINK,o.INLINES.ASSET_HYPERLINK,o.INLINES.ENTRY_HYPERLINK]},validNode:dn,transform:_t}]}},bn=l.css(yn||(yn=j(["\n  padding: 0;\n  margin: 0 0 1.25rem 1.25rem;\n\n  div:first-child {\n    margin: 0;\n    line-height: ",";\n  }\n"])),T.lineHeightDefault),In=((gn={})[o.BLOCKS.UL_LIST]=l.css(hn||(hn=j(["\n    list-style-type: disc;\n    ul {\n      list-style-type: circle;\n      ul {\n        list-style-type: square;\n      }\n    }\n  "]))),gn[o.BLOCKS.OL_LIST]=l.css(vn||(vn=j(["\n    list-style-type: decimal;\n    ol {\n      list-style-type: upper-alpha;\n      ol {\n        list-style-type: lower-roman;\n        ol {\n          list-style-type: lower-alpha;\n        }\n      }\n    }\n  "]))),gn);function kn(e,n){return function(r){return t.createElement(e,Object.assign({},r.attributes,{className:l.cx(bn,In[n])}),r.children)}}var An,On=kn("ul",o.BLOCKS.UL_LIST),Dn=kn("ol",o.BLOCKS.OL_LIST),Bn=l.css(An||(An=j(["\n  margin: 0;\n  list-style: inherit;\n  margin-top: ",";\n\n  ol,\n  ul {\n    margin: 0 0 0 ",";\n  }\n"])),T.spacingXs,T.spacingL);function xn(e){return t.createElement("li",Object.assign({},e.attributes,{className:Bn}),e.children)}function Rn(e,t){return p.Editor.nodes(e,{at:t,match:function(e,t){return p.Element.isElement(e)&&e.type===o.BLOCKS.LIST_ITEM&&t.length>=2}}).next().done}var wn=function(e,t){var n=(void 0===t?{}:t).at;p.Editor.withoutNormalizing(e,(function(){do{p.Transforms.liftNodes(e,{at:n,match:function(e){return p.Element.isElement(e)&&e.type===o.BLOCKS.LIST_ITEM},mode:"lowest"})}while(!Rn(e,n));a.unwrapNodes(e,{at:n,match:{type:o.BLOCKS.LIST_ITEM},split:!1})}))},Kn=[o.BLOCKS.UL_LIST,o.BLOCKS.OL_LIST],_n=function(e,t){var n=t.type;return p.Editor.withoutNormalizing(e,(function(){if(e.selection)if(a.isCollapsed(e.selection)||!a.isRangeAcrossBlocks(e)){var t=N.getListItemEntry(e);if(t)t.list[0].type!==n?a.setNodes(e,{type:n},{at:e.selection,match:function(e){return Kn.includes(e.type)},mode:"lowest"}):wn(e);else{a.wrapNodes(e,{type:n,children:[],data:{}});for(var r,i=[].concat(a.getNodes(e,{match:{type:a.getPluginType(e,a.ELEMENT_DEFAULT)}})),l={type:o.BLOCKS.LIST_ITEM,children:[],data:{}},s=U(i);!(r=s()).done;)a.wrapNodes(e,l,{at:r.value[1]})}}else{var c=p.Range.edges(e.selection),u=p.Node.common(e,c[0].path,c[1].path);if(Kn.includes(u[0].type)||u[0].type===o.BLOCKS.LIST_ITEM){var d=u[0].type;if(u[0].type===o.BLOCKS.LIST_ITEM&&(d=p.Editor.parent(e,u[1])[0].type),d!==n){var f=a.findNode(e,{at:p.Range.start(e.selection),match:{type:Kn},mode:"lowest"}),m=a.findNode(e,{at:p.Range.end(e.selection),match:{type:Kn},mode:"lowest"});if(!f||!m)return;var E=Math.min(f[1].length,m[1].length);a.setNodes(e,{type:n},{at:e.selection,match:function(e,t){return Kn.includes(e.type)&&t.length>=E},mode:"all"})}else wn(e)}else{var y=u[1].length;Array.from(a.getNodes(e,{mode:"all"})).filter((function(e){return e[1].length===y+1})).reverse().forEach((function(t){Kn.includes(t[0].type)?a.setNodes(e,{type:n},{at:t[1]}):(a.setNodes(e,{type:a.getPluginType(e,N.ELEMENT_LIC)},{at:t[1]}),a.wrapNodes(e,{type:o.BLOCKS.LIST_ITEM,children:[],data:{}},{at:t[1]}),a.wrapNodes(e,{type:n,children:[],data:{}},{at:t[1]}))}))}}}))},Pn=function(e,t){var n=t.type,r=t.options.hotkey;return function(t){if("Tab"===t.key&&e.selection&&a.getAbove(e,{at:e.selection,match:{type:n}}))return t.preventDefault(),void function(e,t){var n,r=void 0===t?{}:t,i=r.increase,o=void 0===i||i,l=r.at,s=void 0===l?null!=(n=e.selection)?n:void 0:l,c=a.getNodes(e,{at:s,match:{type:a.getPluginType(e,N.ELEMENT_LIC)}}),u=Array.from(c);if(u.length){var d=[],f=[];u.forEach((function(t){var n=t[1],r=p.Path.parent(n);d.some((function(e){var t=p.Path.parent(e);return p.Path.isAncestor(t,r)}))||(d.push(n),f.push(p.Editor.pathRef(e,n)))}));var m=o?f:f.reverse();p.Editor.withoutNormalizing(e,(function(){m.forEach((function(t){var n=t.unref();if(n){var r=N.getListItemEntry(e,{at:n});r&&(o?function(e,t){var n,r=t.list[0],i=t.listItem[1];try{n=p.Path.previous(i)}catch(e){return}var o=p.Editor.node(e,n);if(o){var l=Array.from(p.Node.children(e,o[1])).find((function(t){return a.match(t[0],{type:N.getListTypes(e)})})),s=p.Path.next(a.getLastChildPath(null!=l?l:o));p.Editor.withoutNormalizing(e,(function(){l||a.wrapNodes(e,{type:r.type,children:[],data:{}},{at:i}),p.Transforms.moveNodes(e,{at:i,to:s})}))}}(e,r):N.isListNested(e,r.list[1])&&N.moveListItemUp(e,r))}}))}))}}(e,{increase:!t.shiftKey});if(r)for(var i,o=U(C(r));!(i=o()).done;)m(i.value)(t)&&_n(e,{type:n})}},Hn=function(e){return[o.BLOCKS.OL_LIST,o.BLOCKS.UL_LIST].includes(e.type)},Mn=function(e,t){var n=a.getParent(e,t[1])||[];return Hn(n[0])},Fn=function(e,t){var n=t[1],r=function(e,t){return a.getAbove(e,{at:t,mode:"lowest",match:Hn})||[]}(e,n)[0];p.Transforms.wrapNodes(e,{type:(null==r?void 0:r.type)||o.BLOCKS.UL_LIST,children:[],data:{}},{at:n})},zn=function(e,t){return 0!==Array.from(p.Node.children(e,t[1])).length},Gn=function(e,t){var n=t[0];if(1===n.children.length){var r=n.children[0];return!p.Text.isText(r)&&!Hn(r)}return!0},qn=function(e,t){p.Transforms.insertNodes(e,[{type:o.BLOCKS.PARAGRAPH,data:{},children:[{text:""}]}],{at:t[1].concat([0])})},jn=function(e,t){var n=t[0],r=t[1];p.Transforms.removeNodes(e,{at:r}),p.Transforms.insertNodes(e,n.children[0].children,{at:r})},Yn=function(e,t){var n=e.selection;if(!n)return!1;if(p.Range.isExpanded(n)){var r=p.Range.edges(n);if(p.Node.common(e,r[0].path,r[1].path)[0].type===t)return!0}var i=a.getBlockAbove(e,{match:{type:[o.BLOCKS.OL_LIST,o.BLOCKS.UL_LIST]},mode:"lowest"});return(null==i?void 0:i[0].type)===t},Un=function(e){return[o.BLOCKS.UL_LIST,o.BLOCKS.OL_LIST].includes(e.type)},Wn=o.LIST_ITEM_BLOCKS,Vn=function(e){var t=e.deleteBackward,n=e.deleteForward,r=e.deleteFragment;return e.deleteBackward=function(n){(function(e,t){var n=N.getListItemEntry(e,{}),r=!1;if(n){var i=n.list,l=n.listItem;a.isSelectionAtBlockStart(e,{match:function(e){return e.type===o.BLOCKS.LIST_ITEM}})&&p.Editor.withoutNormalizing(e,(function(){if(!(r=N.removeFirstListItem(e,{list:i,listItem:l}))&&!(r=N.removeListItem(e,{list:i,listItem:l}))){if(a.isFirstChild(l[1])&&!N.isListNested(e,i[1]))return f.onKeyDownResetNode(e,a.mockPlugin({options:{rules:[{types:[o.BLOCKS.LIST_ITEM],defaultType:o.BLOCKS.PARAGRAPH,hotkey:"backspace",predicate:function(){return a.isSelectionAtBlockStart(e)},onReset:function(e){return wn(e)}}]}}))(f.SIMULATE_BACKSPACE),void(r=!0);a.deleteFragment(e,{unit:t,reverse:!0}),r=!0}}))}return r})(e,n)||t(n)},e.deleteForward=function(t){N.deleteForwardList(e)||n(t)},e.deleteFragment=function(){N.deleteFragmentList(e)||r()},e.insertBreak=function(e){var t=e.insertBreak;return function(){(function(e){if(!e.selection)return!1;var t,n=N.getListItemEntry(e,{});if(n){var r=n.list,i=n.listItem,l=i[0].children[0];if(a.isBlockAboveEmpty(e)&&1===i[0].children.length&&o.TEXT_CONTAINERS.includes(l.type)&&(t=N.moveListItemUp(e,{list:r,listItem:i})))return!0}return!!f.onKeyDownResetNode(e,a.mockPlugin({options:{rules:[{types:[a.getPluginType(e,N.ELEMENT_LI)],defaultType:a.getPluginType(e,a.ELEMENT_DEFAULT),predicate:function(){return!t&&a.isBlockAboveEmpty(e)},onReset:function(e){return N.unwrapList(e)}}]}}))(f.SIMULATE_BACKSPACE)||!(t||!function(e){if(!e.selection)return!1;var t=a.getAbove(e,{match:{type:o.TEXT_CONTAINERS}});if(!t)return!1;var n=t[1],r=a.getParent(e,n);if(!r)return!1;var i=r[1];return r[0].type===o.BLOCKS.LIST_ITEM&&(p.Editor.withoutNormalizing(e,(function(){if(e.selection){var t=a.isSelectionAtBlockStart(e),r=a.isSelectionAtBlockEnd(e),l=t&&a.isFirstChild(n),s=!t&&!r;s&&p.Transforms.splitNodes(e);var c=l?i:p.Path.next(i);a.insertNodes(e,function(e,t){void 0===t&&(t=!1);var n=[];if(t){var r=p.Editor.marks(e)||{};n=[{type:o.BLOCKS.PARAGRAPH,data:{},children:[P({text:""},r)]}]}return{type:o.BLOCKS.LIST_ITEM,data:{},children:n}}(e,!s),{at:c});var u=t?n:p.Path.next(n),d=u[u.length-1]||0,f=c.concat([s?0:1]);l||a.moveChildren(e,{at:i,to:f,fromStartIndex:d}),p.Transforms.select(e,c),p.Transforms.collapse(e,{edge:"start"})}})),!0)}(e))})(e)||t()}}(e),e.insertFragment=function(e){var t=e.insertFragment;return function(n){if(e.selection){if(a.findNode(e,{match:{type:o.BLOCKS.LIST_ITEM},mode:"lowest"})){var r=function(e){var t=e[0];return o.TEXT_CONTAINERS.includes(t.type)?[].concat(t.children,e.slice(1)):e}(function(e){if(1!==e.length)return e;var t=e[0];return t.type!==o.BLOCKS.LIST_ITEM||1!==t.children.length?e:t.children}(n.flatMap((function(e){return function(e){if(!Un(e))return[e];var t=Array.from(p.Node.texts(e)),n=t.reduce((function(t,n){return p.Path.isAncestor(t[1],n[1])?t:p.Node.common(e,n[1],t[1])}),function(e,t){for(var n=p.Path.parent(t[1]);p.Node.get(e,n).type!==o.BLOCKS.LIST_ITEM;)n=p.Path.parent(n);return[p.Node.get(e,n),n]}(e,t[0]));return Un(n[0])?n[0].children:[n[0]]}(e)})))),i=r.findIndex((function(t){return p.Editor.isBlock(e,t)}));i<0&&(i=r.length);var l=r.slice(0,i),s=r.slice(i);return p.Transforms.insertNodes(e,l,{at:e.selection,select:!0}),p.Transforms.insertNodes(e,s,{at:e.selection,select:!0})}var c=Un(n[0])?[{text:""}].concat(n):n;return t(c)}}}(e),e.normalizeNode=N.normalizeList(e,{validLiChildrenTypes:Wn}),e};function Qn(e){var n=ve(),r=$();function i(e){return function(){null!=r&&r.selection&&(_n(r,{type:e}),fe(r))}}return r?t.createElement(t.Fragment,null,mt(n.field,o.BLOCKS.UL_LIST)&&t.createElement(Qt,{title:"UL",testId:"ul-toolbar-button",onClick:i(o.BLOCKS.UL_LIST),isActive:Yn(r,o.BLOCKS.UL_LIST),isDisabled:e.isDisabled},t.createElement(S.ListBulletedIcon,null)),mt(n.field,o.BLOCKS.OL_LIST)&&t.createElement(Qt,{title:"OL",testId:"ol-toolbar-button",onClick:i(o.BLOCKS.OL_LIST),isActive:Yn(r,o.BLOCKS.OL_LIST),isDisabled:e.isDisabled},t.createElement(S.ListNumberedIcon,null))):null}var Xn=function(e){var n=e.mark,r=e.title,i=e.icon,o=function(e){var o=e.isDisabled,l=$(),s=t.useCallback((function(){if(null!=l&&l.selection){var e=a.isMarkActive(l,n);l.tracking.onToolbarAction(e?"unmark":"mark",{markType:n}),a.toggleMark(l,{key:n}),fe(l)}}),[l]);return l?t.createElement(Qt,{title:r,testId:n+"-toolbar-button",onClick:s,isActive:a.isMarkActive(l,n),isDisabled:o},i):null};return o.displayName=n,o},$n=function(e){return function(t,n){var r=n.options.hotkey;return function(n){if(t.selection&&r&&m(r,n)){n.preventDefault();var i=a.isMarkActive(t,e);t.tracking.onShortcutAction(i?"unmark":"mark",{markType:e}),a.toggleMark(t,{key:e})}}}},Zn=Xn({title:"Bold",mark:o.MARKS.BOLD,icon:t.createElement(S.FormatBoldIcon,null)}),Jn={bold:l.css({fontWeight:600})};function er(e){return t.createElement("strong",Object.assign({},e.attributes,{className:Jn.bold}),e.children)}var tr=Xn({title:"Code",mark:o.MARKS.CODE,icon:t.createElement(S.CodeIcon,null)}),nr={code:l.css({fontFamily:"monospace",fontSize:".9em"})};function rr(e){return t.createElement("code",Object.assign({},e.attributes,{className:nr.code}),e.children)}var ir=Xn({title:"Italic",mark:o.MARKS.ITALIC,icon:t.createElement(S.FormatItalicIcon,null)}),or={italic:l.css({fontStyle:"italic"})};function ar(e){return t.createElement("em",Object.assign({},e.attributes,{className:or.italic}),e.children)}var lr=Xn({title:"Underline",mark:o.MARKS.UNDERLINE,icon:t.createElement(S.FormatUnderlinedIcon,null)});function sr(e){return t.createElement("u",Object.assign({},e.attributes),e.children)}var cr,ur,dr=function(e){return o.TEXT_CONTAINERS.includes(e.type)},fr=[{match:p.Text.isText,validNode:function(e,t){var n,r=null==(n=a.getParent(e,t[1]))?void 0:n[0];return!!r&&(dr(r)||ue.includes(r.type)||e.isVoid(r))},transform:function(e,t){return Mt(o.BLOCKS.PARAGRAPH)(e,t)}},{match:{type:ue},validNode:function(e,t){var n,r=null==(n=a.getParent(e,t[1]))?void 0:n[0];return!!r&&dr(r)},transform:Mt(o.BLOCKS.PARAGRAPH)}],mr=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t}(q(Error)),pr=function(e){return function(t,n){var r=n[0];return p.Element.isElement(r)&&e.includes(r.type)}},Er=function(e){var t=e.default;if(!t)throw new mr("A default transformer MUST be provided");return function(n,r){var i=r[0],o=p.Element.isElement(i)?i.type:"default";return(e[o]||t)(n,r)}},yr=function(e){for(var t,n=fr,r=U(e.plugins);!(t=r()).done;){var i=t.value,o=i.normalizer;if(o)for(var l,s=U(o);!(l=s()).done;){var c=P({},l.value);if(!c.match&&!i.isElement)throw new mr("rule.match MUST be defined in a non-element plugin");if(c.match||(c.match={type:a.getPluginType(e,i.key)}),I(c.transform)){if("validNode"in c)throw new mr("conditional transformations are not supported in validNode rules");c.transform=Er(P({default:_t},c.transform))}c.transform||(c.transform=_t),"validChildren"in c&&Array.isArray(c.validChildren)&&(c.validChildren=pr(c.validChildren)),n.push(c)}}var u=function(t,n){p.Editor.withoutNormalizing(e,(function(){t(e,n)}))},d=e.normalizeNode;return e.normalizeNode=function(t){for(var r,i=t[0],o=function(e,t){var n=t[1];return p.Text.isText(t[0])?[]:Array.from(p.Node.children(e,n))}(e,t),l=U(n);!(r=l()).done;){var s=r.value;if(a.match(i,s.match)){if("validNode"in s&&!s.validNode(e,t))return void u(s.transform,t);if("validChildren"in s){var c=function(){var t=s.validChildren,n=o.find((function(n){return!t(e,n)}));if(n)return u(s.transform,n),{v:void 0}}();if("object"==typeof c)return c.v}}}return d(t)},e},hr=((ur={})[o.BLOCKS.PARAGRAPH]=l.css(cr||(cr=j(["\n    line-height: ",";\n    margin-bottom: 1.5em;\n  "])),T.lineHeightDefault),ur);function vr(e){return t.createElement("div",Object.assign({},e.attributes,{className:hr[o.BLOCKS.PARAGRAPH]}),e.children)}var gr=function(e,t){var n=t.options.hotkey;return function(t){e.selection&&n&&m(n,t)&&me(e,{activeType:o.BLOCKS.PARAGRAPH,inactiveType:o.BLOCKS.PARAGRAPH})}},Lr=[function(e){return e.querySelectorAll("style").forEach((function(e){e.remove()})),e},function(e){if(!["google-sheets-html-origin",'meta[content="Excel.Sheet"]','meta[content*="Microsoft Excel"]'].some((function(t){return!!e.querySelector(t)})))return e;for(var t=function(e){var t;return""===(null!=(t=e.textContent)?t:"").trim()},n=Array.from(e.querySelectorAll("table")),r=function(){var e=o[i];e.querySelectorAll("tr").forEach((function(e){t(e)&&e.remove()}));for(var n=Array.from(e.querySelectorAll("tr")),r=1;;){var a=n.map((function(e){return e.querySelector("th:nth-of-type("+r+"), td:nth-of-type("+r+")")})).filter((function(e){return!!e}));if(0===a.length)break;a.every((function(e){return t(e)}))?a.forEach((function(e){return e.remove()})):r+=1}},i=0,o=n;i<o.length;i++)r();return e}],Sr=function(e){return Lr.reduce((function(e,t){return t(e)}),(new DOMParser).parseFromString(e,"text/html")).body.innerHTML.replace(/>\s+</g,"><").replace(/(.*)<div.*>(<table.*<\/table>)<\/div>(.*)/g,"$1$2$3")},Tr=/data-slate-fragment="(.+?)"/m,Nr=l.css({margin:"0 0 1.3125rem",borderLeft:"6px solid "+T.gray200,paddingLeft:"0.875rem",fontStyle:"normal"});function Cr(e){return t.createElement("blockquote",Object.assign({},e.attributes,{className:Nr}),e.children)}var br=function(e){var t=a.getAbove(e,{match:{type:o.TEXT_CONTAINERS},mode:"lowest"});if(!t)return!1;if(!a.isAncestorEmpty(e,t[0]))return!1;var n=a.getBlockAbove(e,{match:{type:o.BLOCKS.QUOTE},mode:"lowest"});return!!n&&!(!a.hasSingleChild(n[0])||!a.isLastChild(n,t[1]))};function Ir(e,t){if(e.selection){var n=te(e,o.BLOCKS.QUOTE);null==t||t(n?"remove":"insert",{nodeType:o.BLOCKS.QUOTE}),p.Editor.withoutNormalizing(e,(function(){e.selection&&(p.Transforms.unwrapNodes(e,{match:function(e){return p.Element.isElement(e)&&e.type===o.BLOCKS.QUOTE},split:!0}),n||p.Transforms.wrapNodes(e,{type:o.BLOCKS.QUOTE,data:{},children:[]}))}))}}var kr=function(e,t){return function(n){var r=t.options.hotkey;r&&m(r,n)&&(n.preventDefault(),Ir(e,e.tracking.onShortcutAction))}},Ar=function(e){var t=e.insertFragment;return e.insertFragment=function(n){var r=n.length&&n[0],i=p.Element.isElement(r)&&r.type===o.BLOCKS.QUOTE,l=a.getAbove(e,{match:{type:o.TEXT_CONTAINERS}}),s=l&&""!==p.Node.string(l[0]);if(i&&s){var c=e.selection;(function(e){return!!e&&0!==p.Point.compare(e.anchor,e.focus)})(c)&&p.Transforms.delete(e,{at:c});var u=a.getAbove(e,{match:{type:o.TEXT_CONTAINERS}});if(u&&""!==p.Node.string(u[0]))return void p.Transforms.insertNodes(e,n)}t(n)},e};function Or(){var e;return{key:o.BLOCKS.QUOTE,type:o.BLOCKS.QUOTE,isElement:!0,component:Cr,options:{hotkey:"mod+shift+1"},handlers:{onKeyDown:kr},deserializeHtml:{rules:[{validNodeName:"BLOCKQUOTE"}]},resetNode:[{hotkey:"backspace",types:[o.BLOCKS.QUOTE],predicate:br,onReset:Ir}],normalizer:[{validChildren:o.CONTAINERS[o.BLOCKS.QUOTE],transform:(e={},e[o.BLOCKS.QUOTE]=Ht,e.default=Ft,e)}],withOverrides:Ar}}function Dr(e){var n=$();return n?t.createElement(Qt,{title:"Blockquote",onClick:function(){n&&(Ir(n,n.tracking.onToolbarAction),fe(n))},testId:"quote-toolbar-button",isDisabled:e.isDisabled,isActive:te(n,o.BLOCKS.QUOTE)},t.createElement(S.QuoteIcon,null)):null}function Br(e){document.dispatchEvent(new CustomEvent("close-rte-palette-commands",{detail:{editorId:e}}))}function xr(e){var n,r=e.editorId,i=t.useState(null),o=i[0],a=i[1],s=t.useState(!1),c=s[0],u=s[1],d=t.useState(0),f=d[0],m=d[1];function p(){u(!1),a(null)}return t.useEffect((function(){function e(e){if(r===e.detail.editorId){var t=function(){var e=document.getSelection();if(e){var t,n,r=e.getRangeAt(0),i=r.startContainer,o=r.startOffset;if(o>0)return(n=document.createRange()).setStart(i,o-1),n.setEnd(i,o),{left:(t=n.getBoundingClientRect()).right,top:t.top};if(o<i.length)return(n=document.createRange()).setStart(i,o),n.setEnd(i,o+1),{left:(t=n.getBoundingClientRect()).left,top:t.top};t=i.getBoundingClientRect();var a=getComputedStyle(i),l=parseInt(a.lineHeight),s=parseInt(a.fontSize);return{left:t.left,top:t.top+(l-s)/2}}}();t&&(a(t),u(!0),m((function(e){return e+1})))}}return document.addEventListener("open-rte-palette-commands",e),function(){document.removeEventListener("open-rte-palette-commands",e)}}),[r]),t.useEffect((function(){function e(e){r===e.detail.editorId&&p()}return document.addEventListener("close-rte-palette-commands",e),function(){return document.removeEventListener("close-rte-palette-commands",e)}}),[r]),t.useEffect((function(){if(c)return window.addEventListener("resize",e),window.addEventListener("scroll",e,!0),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e,!0)};function e(){p()}}),[c]),!c||!o||f>3?null:t.createElement("div",{className:(n=o,l.css({position:"fixed",top:n.top-14,left:n.left+10,zIndex:1,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.15)",borderRadius:"8px",userSelect:"none"})),"data-test-id":"rte-slash-commands"},t.createElement(h.Card,null,t.createElement(h.Text,null,"Slash commands are temporarily unavailable.")))}var Rr=function(e,t){if(a.someNode(e,{match:{type:a.getPluginType(e,O.ELEMENT_TABLE)}})){var n=a.getAbove(e,{match:{type:a.getPluginType(e,O.ELEMENT_TR)}});if(n){var r=n[0],i=t(n[1]);a.insertNodes(e,O.getEmptyRowNode(e,{header:!1,colCount:r.children.length}),{at:i,select:!0}),p.Transforms.select(e,p.Editor.start(e,i))}}},wr=function(e){Rr(e,(function(e){return p.Path.next(e)}))},Kr=function(e){Rr(e,(function(e){return e}))},_r=function(e,t,n){var r=t.header;if(a.someNode(e,{match:{type:a.getPluginType(e,O.ELEMENT_TABLE)}})){var i=a.getAbove(e,{match:{type:[a.getPluginType(e,O.ELEMENT_TD),a.getPluginType(e,O.ELEMENT_TH)]}}),o=a.getAbove(e,{match:{type:a.getPluginType(e,O.ELEMENT_TABLE)}});if(i&&o){var l=n(i[1]).slice(),s=l.length-2;o[0].children.forEach((function(t,n){l[s]=n,a.insertNodes(e,O.getEmptyCellNode(e,{header:r&&0===n}),{at:l,select:0===n})}))}}},Pr=function(e,t){_r(e,t,(function(e){return p.Path.next(e)}))},Hr=function(e,t){_r(e,t,(function(e){return e}))};function Mr(e){O.insertTable(e,{header:!0}),function(e){var t=function(e){if(e.selection)return p.Path.levels(e.selection.focus.path).find((function(e){return 1===e.length}))}(e);if(t&&!a.isFirstChild(t)){var n=p.Path.previous(t);if(n){var r=p.Editor.nodes(e,{at:n,match:function(e){return e.type===o.BLOCKS.PARAGRAPH}})[0];r&&a.isAncestorEmpty(e,r[0])&&(p.Transforms.moveNodes(e,{at:t,to:n}),p.Transforms.removeNodes(e,{at:t}))}}}(e)}var Fr,zr,Gr,qr,jr,Yr,Ur,Wr=function(e,t){var n=t[1],r=a.getParent(e,n);if(!r)throw new Error("table rows must be wrapped in a table node");return Math.max.apply(Math,Array.from(p.Node.children(e,r[1])).map((function(t){return Array.from(p.Node.children(e,t[1])).length})))-Array.from(p.Node.children(e,n)).length},Vr=function(e,t){return 0!==Array.from(p.Node.children(e,t[1])).length},Qr=function(e){return p.Element.isElement(e)&&e.type===o.BLOCKS.TABLE},Xr={topRight:l.css({position:"absolute",top:"6px",right:"5px"})},$r=function(){var e=$(),t=E.useReadOnly(),r=n.useState(!1),i=r[0],l=r[1],s=n.useState(!1),c=s[0],u=s[1],d=n.useCallback((function(){l(!1)}),[]);n.useEffect((function(){u(Boolean(e&&function(e){var t=a.getAbove(e,{match:{type:o.BLOCKS.TABLE}});if(!t)return!1;var n=a.getChildren(t)[0];return!!n&&a.getChildren(n).every((function(e){return e[0].type===o.BLOCKS.TABLE_HEADER_CELL}))}(e)))}),[e]);var f=n.useMemo((function(){return!!e&&!a.getAbove(e,{match:{type:o.BLOCKS.TABLE_HEADER_CELL}})}),[e]),m=n.useCallback((function(){if(d(),e){var t=!c;u(t),function(e,t){var n=a.getAbove(e,{match:{type:o.BLOCKS.TABLE}});if(n){var r=a.getChildren(n)[0];r&&a.getChildren(r).forEach((function(n){a.setNodes(e,{type:t?o.BLOCKS.TABLE_HEADER_CELL:o.BLOCKS.TABLE_CELL},{at:n[1]})}))}}(e,t)}}),[e,d,c]),y=n.useCallback((function(t,n,r){return function(){if(null!=e&&e.selection){d();var i=function(e){var t=re(e,o.BLOCKS.TABLE)[0];return t?function(e){var t,n=e.children.length;return n?{numRows:n,numColumns:null==(t=e.children[0].children)?void 0:t.length}:null}(t):null}(e);p.Editor.withoutNormalizing(e,(function(){t(e,{header:c})})),e.tracking.onViewportAction(n+"Table"+("Table"===r?"":r),{tableSize:i})}}}),[e,c,d]);return t?null:n.createElement(h.Menu,{placement:"left",isOpen:i,onOpen:function(){l(!0)},onClose:d},n.createElement(h.Menu.Trigger,null,n.createElement(h.IconButton,{size:"small",variant:"transparent",tabIndex:-1,className:Xr.topRight,icon:n.createElement(S.ChevronDownIcon,null),"aria-label":"Open table menu",testId:"cf-table-actions-button"})),n.createElement(h.Menu.List,null,n.createElement(h.Menu.Item,{onClick:y(Kr,"insert","Row"),disabled:!f},"Add row above"),n.createElement(h.Menu.Item,{onClick:y(wr,"insert","Row")},"Add row below"),n.createElement(h.Menu.Item,{onClick:y(Hr,"insert","Column")},"Add column left"),n.createElement(h.Menu.Item,{onClick:y(Pr,"insert","Column")},"Add column right"),n.createElement(h.Menu.Divider,null),n.createElement(h.Menu.Item,{onClick:m},c?"Disable table header":"Enable table header"),n.createElement(h.Menu.Divider,null),n.createElement(h.Menu.Item,{onClick:y(O.deleteRow,"remove","Row")},"Delete row"),n.createElement(h.Menu.Item,{onClick:y(O.deleteColumn,"remove","Column")},"Delete column"),n.createElement(h.Menu.Item,{onClick:y(O.deleteTable,"remove","Table")},"Delete table")))},Zr=l.css(Fr||(Fr=j(["\n  border: 1px solid ",";\n  border-collapse: collapse;\n  padding: 10px 12px;\n  min-width: 48px;\n  position: relative;\n  vertical-align: top;\n\n  div:last-child {\n    margin-bottom: 0;\n  }\n"])),T.gray400),Jr=function(e){var n=E.useSelected();return t.createElement("td",Object.assign({},e.attributes,e.element.data,{className:Zr}),n&&t.createElement($r,null),e.children)},ei=l.css(zr||(zr=j(["\n  background-clip: padding-box;\n  background-color: ",";\n  border: 1px solid ",";\n  border-collapse: collapse;\n  padding: 10px 12px;\n  font-weight: ",";\n  text-align: left;\n  min-width: 48px;\n  position: relative;\n\n  div:last-child {\n    margin-bottom: 0;\n  }\n"])),T.gray200,T.gray400,T.fontWeightNormal),ti=function(e){var n=E.useSelected();return t.createElement("th",Object.assign({},e.attributes,e.element.data,{className:ei}),n&&t.createElement($r,null),e.children)},ni=l.css(Gr||(Gr=j(["\n  border: 1px solid ",";\n  border-collapse: collapse;\n\n  &:hover td {\n    background-color: transparent !important;\n  }\n"])),T.gray400),ri=function(e){return t.createElement("tr",Object.assign({},e.attributes,{className:ni}),e.children)},ii=l.css(qr||(qr=j(["\n  margin-bottom: 1.5em;\n  border-collapse: collapse;\n  border-radius: 5px;\n  border-style: hidden;\n  box-shadow: 0 0 0 1px ",";\n  width: 100%;\n  table-layout: fixed;\n  overflow: hidden;\n"])),T.gray400),oi=function(e){return t.createElement("div",{"data-block-type":o.BLOCKS.TABLE},t.createElement("table",Object.assign({className:ii},e.attributes),t.createElement("tbody",null,e.children)))},ai=function(e){var t,n;if(!p.Element.isElement(e))return[e];if(e.type!==o.BLOCKS.TABLE||1!==(null==(t=e.children)?void 0:t.length))return[e];var r=e.children[0];return 1!==(null==r||null==(n=r.children)?void 0:n.length)?[e]:r.children[0].children},li=function(e,t){var n=O.onKeyDownTable(e,t);return function(t){var r,i,l=window.getSelection();if(l&&(null==(r=l.anchorNode.attributes)||null==(i=r["data-block-type"])?void 0:i.value)===o.BLOCKS.TABLE){if("Enter"===t.key){var s=a.getAbove(e,{match:{type:o.BLOCKS.TABLE}});if(!s)return;ae(e,{at:s[1],select:!0})}return t.preventDefault(),void t.stopPropagation()}if("Tab"===t.key&&!t.shiftKey){t.preventDefault();var c=O.getTableCellEntry(e,{});if(c){var u=c.tableElement,d=c.tableRow,f=a.isLastChild(d,c.tableCell[1]);if(a.isLastChild(u,d[1])&&f)return void wr(e)}}n(t)}},si=Object.values(o.INLINES).map((function(e){return{type:e}})),ci={document:{nodes:[{types:o.TOP_LEVEL_BLOCKS.map((function(e){return{type:e}}))}]},blocks:P((jr={},jr[o.BLOCKS.PARAGRAPH]={nodes:[{match:[].concat(si,[{object:"text"}])}]},jr[o.BLOCKS.HEADING_1]={nodes:[{match:[].concat(si,[{object:"text"}])}]},jr[o.BLOCKS.HEADING_2]={nodes:[{match:[].concat(si,[{object:"text"}])}]},jr[o.BLOCKS.HEADING_3]={nodes:[{match:[].concat(si,[{object:"text"}])}]},jr[o.BLOCKS.HEADING_4]={nodes:[{match:[].concat(si,[{object:"text"}])}]},jr[o.BLOCKS.HEADING_5]={nodes:[{match:[].concat(si,[{object:"text"}])}]},jr[o.BLOCKS.HEADING_6]={nodes:[{match:[].concat(si,[{object:"text"}])}]},jr),o.VOID_BLOCKS.reduce((function(e,t){var n;return P({},e,((n={})[t]={isVoid:!0},n))}),{}),(Yr={},Yr[o.BLOCKS.QUOTE]={nodes:[{match:[o.CONTAINERS[o.BLOCKS.QUOTE].map((function(e){return{type:e}}))],min:1}],normalize:function(e,t){if("child_type_invalid"===t.code)return e.unwrapBlockByKey(t.node.key,o.BLOCKS.QUOTE)}},Yr)),inlines:(Ur={},Ur[o.INLINES.HYPERLINK]={nodes:[{match:[{object:"text"}]}]},Ur[o.INLINES.ENTRY_HYPERLINK]={nodes:[{match:[{object:"text"}]}]},Ur[o.INLINES.ASSET_HYPERLINK]={nodes:[{match:[{object:"text"}]}]},Ur[o.INLINES.EMBEDDED_ENTRY]={isVoid:!0},Ur)};function ui(e){var t=D.toContentfulDocument({document:e.children,schema:ci});return B.documentToPlainTextString(t).length}function di(e){var t=e.getData("text/html"),n=(new DOMParser).parseFromString(t,"text/html");return n.querySelector('[id*="docs-internal-guid"]')?"Google Docs":n.querySelector("google-sheets-html-origin")||n.querySelector("[data-sheets-value]")?"Google Spreadsheets":n.querySelector('meta[content*="Microsoft Excel"]')?"Microsoft Excel":n.querySelector('meta[content*="Microsoft Word"]')?"Microsoft Word":n.querySelector('[style*="Arial_MSFontService"]')&&(n.querySelector(".TextRun")||n.querySelector(".OutlineElement"))?"Microsoft Word Online":n.querySelector('meta[content="Cocoa HTML Writer"]')?"Apple Notes":n.querySelector('[style*="Slack-Lato, Slack-Fractions"]')?"Slack":"Unknown"}var fi=function(e){var t={onViewportAction:function(t,n){return void 0===n&&(n={}),e(t,P({origin:"viewport-interaction"},n))},onShortcutAction:function(t,n){return void 0===n&&(n={}),e(t,P({origin:"shortcut"},n))},onToolbarAction:function(t,n){return void 0===n&&(n={}),e(t,P({origin:"toolbar-icon"},n))},onCommandPaletteAction:function(t,n){return void 0===n&&(n={}),e(t,P({origin:"command-palette"},n))}};return{key:"TrackingPlugin",withOverrides:function(e){var n=e.insertData;return e.tracking=t,e.insertData=function(r){if(0!==r.types.length){var i,o=null==(i=window.getSelection())?void 0:i.toString().length,a=ui(e);setTimeout((function(){var n=ui(e);t.onShortcutAction("paste",{characterCountAfter:n,characterCountBefore:a,characterCountSelection:o,source:di(r)})}))}n(r)},e}}};function mi(e){return e.some((function(e){return e.type===o.BLOCKS.TABLE}))}var pi=function(e){return e.type===o.BLOCKS.TABLE_HEADER_CELL},Ei=function(e){return function(t,n){var r,i=n[0];return p.Element.isElement(i)&&(null==(r=t.tracking)||r.onViewportAction("invalidTablePaste",{nodeType:i.type})),e(t,n)}},yi=function(){var e;return O.createTablePlugin({type:o.BLOCKS.TABLE,handlers:{onKeyDown:li},withOverrides:function(e,t){return O.withTable(e,t),function(e){var t=e.insertData;e.insertData=function(n){if(n.getData("text/html")){var r=e.children;t(n);var i=e.children;setTimeout((function(){var t;mi(r)||mi(i)&&e.tracking.onViewportAction("paste",{tablePasted:!0,source:di(n),hasHeadersOutsideFirstRow:(t=i,t.filter((function(e){return e.type===o.BLOCKS.TABLE})).flatMap((function(e){return e.children.slice(1)})).some((function(e){return e.children.some(pi)})))})}),1)}else t(n)}}(e),e.insertFragment=function(e){var t=e.insertFragment;return function(n){var r;if(e.selection){var i=(n=n.flatMap(ai)).some((function(e){return Qr(e)})),o=0===n.findIndex((function(e){return Qr(e)})),l=""!==a.getText(e,null==(r=e.selection)?void 0:r.focus.path);return i&&o&&l&&ae(e),t(n)}}}(e),e},overrideByKey:(e={},e[O.ELEMENT_TABLE]={type:o.BLOCKS.TABLE,component:oi,normalizer:[{validNode:Vr},{validNode:function(e,t){var n=t[1],r=!!a.getBlockAbove(e,{at:n,match:{type:[o.BLOCKS.TABLE_CELL,o.BLOCKS.TABLE_HEADER_CELL]}});return ne(n)||r},transform:Ft},{validChildren:o.CONTAINERS[o.BLOCKS.TABLE]}]},e[O.ELEMENT_TR]={type:o.BLOCKS.TABLE_ROW,component:ri,normalizer:[{validChildren:o.CONTAINERS[o.BLOCKS.TABLE_ROW],transform:Mt(o.BLOCKS.TABLE_CELL)},{validNode:Vr},{validNode:function(e,t){var n,r=null==(n=a.getParent(e,t[1]))?void 0:n[0];return r&&r.type===o.BLOCKS.TABLE},transform:Mt(o.BLOCKS.TABLE)},{validNode:function(e,t){return 0===Wr(e,t)},transform:function(e,t){var n,r=Wr(e,t),i=p.Path.next(a.getLastChildPath(t));p.Transforms.insertNodes(e,(n={type:o.BLOCKS.TABLE_CELL,data:{},children:[{type:o.BLOCKS.PARAGRAPH,data:{},children:[{text:""}]}]},new Array(r).fill(n)),{at:i})}}]},e[O.ELEMENT_TH]={type:o.BLOCKS.TABLE_HEADER_CELL,component:ti,normalizer:[{validChildren:o.CONTAINERS[o.BLOCKS.TABLE_HEADER_CELL],transform:Ei(Pt)}]},e[O.ELEMENT_TD]={type:o.BLOCKS.TABLE_CELL,component:Jr,normalizer:[{validChildren:o.CONTAINERS[o.BLOCKS.TABLE_CELL],transform:Ei(Pt)}]},e)})};function hi(e){var n=$(),r=n&&function(e){return[O.ELEMENT_TABLE,O.ELEMENT_TH,O.ELEMENT_TR,O.ELEMENT_TD].some((function(t){return te(e,t)}))}(n);function i(){return(i=_(ke.mark((function e(){return ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:n.tracking.onToolbarAction("insertTable"),Mr(n),fe(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n?t.createElement(Qt,{title:"Table",testId:"table-toolbar-button",onClick:function(){return i.apply(this,arguments)},isActive:r,isDisabled:e.isDisabled},t.createElement(S.TableIcon,null)):null}function vi(e,t,n){var r=a.getAbove(t,{match:{type:o.TEXT_CONTAINERS}});if(r){var i=r[1];if(a.isAncestorEmpty(t,r[0])&&1===i.length&&t.children.length>1){p.Transforms.removeNodes(t,{at:i});var l=p.Editor.before(t,t.selection,{unit:e});l&&p.Editor.nodes(t,{match:function(e){return a.queryNode([e,l.path],{allow:[o.BLOCKS.EMBEDDED_ASSET,o.BLOCKS.EMBEDDED_ENTRY,o.BLOCKS.HR]})},at:l})[0]&&p.Transforms.select(t,l)}else n(e)}else n(e)}var gi={deserializeAst:!0,deserializeHtml:!0,eventEditor:!0},Li=function(e){return!!e&&e.content.length>0},Si=function(e){return function e(t){return void 0===t&&(t=[]),t.map((function(t){var n;return function(e){return"text"in e}(t)?t:0===(null==(n=t.children)?void 0:n.length)?P({},t,{children:[{text:"",data:{}}]}):P({},t,{children:e(t.children)})}))}(D.toSlatejsDocument({document:Li(e)?e:o.EMPTY_DOCUMENT,schema:ci}))},Ti="1px solid "+T.gray400,Ni={root:l.css({position:"relative"}),editor:l.css({borderRadius:"0 0 "+T.borderRadiusMedium+" "+T.borderRadiusMedium,border:Ti,borderTop:0,padding:"20px",fontSize:T.spacingM,fontFamily:T.fontStackPrimary,minHeight:"400px",background:T.colorWhite,outline:"none",whiteSpace:"pre-wrap",overflowWrap:"break-word",webkitUserModify:"read-write-plaintext-only",a:{span:{cursor:"not-allowed","&:hover":{cursor:"not-allowed"}}},"ul > li > div":{margin:0}}),hiddenToolbar:l.css({borderTop:Ti}),enabled:l.css({background:T.colorWhite,a:{span:{cursor:"pointer","&:hover":{cursor:"pointer"}}}}),disabled:l.css({background:T.gray100,cursor:"not-allowed"})};function Ci(e){var n=e.children,r=e.isDisabled;return t.createElement(h.Menu,{placement:"bottom-end",isOpen:e.isOpen,onClose:e.onClose,onOpen:e.onToggle},t.createElement(h.Menu.Trigger,null,t.createElement(h.Button,{endIcon:t.createElement(S.ChevronDownIcon,null),testId:"toolbar-entity-dropdown-toggle",variant:"secondary",size:"small",startIcon:t.createElement(S.PlusIcon,null),isDisabled:r},"Embed")),t.createElement(h.Menu.List,{className:"toolbar-entity-dropdown-list"},n))}var bi,Ii=function(e){var r=e.isDisabled,i=e.canInsertBlocks,a=ve(),l=$(),s=t.useState(!1),c=s[0],u=s[1],d=function(){return u(!1)},f=mt(a.field,o.INLINES.EMBEDDED_ENTRY),m=mt(a.field,o.BLOCKS.EMBEDDED_ENTRY)&&i,p=mt(a.field,o.BLOCKS.EMBEDDED_ASSET)&&i,E=n.createElement(n.Fragment,null,m&&n.createElement(Pe,{isDisabled:!!r,nodeType:o.BLOCKS.EMBEDDED_ENTRY,onClose:d}),f&&n.createElement(Ze,{isDisabled:!!r||se(l),onClose:d}),p&&n.createElement(Pe,{isDisabled:!!r,nodeType:o.BLOCKS.EMBEDDED_ASSET,onClose:d}));return m||f||p?n.createElement(Ci,{isDisabled:r,onClose:d,onToggle:function(){return u(!c)},isOpen:c},E):null},ki={toolbar:l.css({border:"1px solid "+T.gray400,backgroundColor:T.gray100,padding:T.spacingXs,borderRadius:T.borderRadiusMedium+" "+T.borderRadiusMedium+" 0 0"}),divider:l.css({display:"inline-block",height:"21px",width:"1px",background:T.gray300,margin:"0 "+T.spacing2Xs}),embedActionsWrapper:l.css({display:["-webkit-box","-ms-flexbox","flex"],webkitAlignSelf:"flex-start",alignSelf:"flex-start",msFlexItemAlign:"start",marginLeft:"auto"}),formattingOptionsWrapper:l.css({display:["-webkit-box","-ms-flexbox","flex"],msFlexAlign:"center",webkitBoxAlign:"center",alignItems:"center",msFlexWrap:"wrap",flexWrap:"wrap",marginRight:"20px"})},Ai=function(e){var t=e.isDisabled,r=ve(),i=$(),a=!ie(i,o.BLOCKS.TABLE),l=n.useMemo((function(){return e=r.field,{isAnyMarkEnabled:(t=function(t,n){return t.some((function(t){return n(e,t)}))})(Object.values(o.MARKS),pt),isAnyHyperlinkEnabled:t([o.INLINES.HYPERLINK,o.INLINES.ASSET_HYPERLINK,o.INLINES.ENTRY_HYPERLINK],mt),isAnyBlockFormattingEnabled:t([o.BLOCKS.UL_LIST,o.BLOCKS.OL_LIST,o.BLOCKS.QUOTE,o.BLOCKS.HR],mt)};var e,t}),[r.field]),s=ie(i,o.BLOCKS.UL_LIST)||ie(i,o.BLOCKS.OL_LIST),c=ie(i,o.BLOCKS.QUOTE),u=t||!a||s||c;return n.createElement(h.Flex,{testId:"toolbar",className:ki.toolbar,alignItems:"center"},n.createElement("div",{className:ki.formattingOptionsWrapper},n.createElement(ht,{isDisabled:t||!a}),l.isAnyMarkEnabled&&n.createElement("span",{className:ki.divider}),pt(r.field,o.MARKS.BOLD)&&n.createElement(Zn,{isDisabled:t}),pt(r.field,o.MARKS.ITALIC)&&n.createElement(ir,{isDisabled:t}),pt(r.field,o.MARKS.UNDERLINE)&&n.createElement(lr,{isDisabled:t}),pt(r.field,o.MARKS.CODE)&&n.createElement(tr,{isDisabled:t}),l.isAnyHyperlinkEnabled&&n.createElement(n.Fragment,null,n.createElement("span",{className:ki.divider}),n.createElement(un,{isDisabled:t})),l.isAnyBlockFormattingEnabled&&n.createElement("span",{className:ki.divider}),n.createElement(Qn,{isDisabled:t||!a}),mt(r.field,o.BLOCKS.QUOTE)&&n.createElement(Dr,{isDisabled:t||!a}),mt(r.field,o.BLOCKS.HR)&&n.createElement(Zt,{isDisabled:t||!a}),mt(r.field,o.BLOCKS.TABLE)&&n.createElement(hi,{isDisabled:u})),n.createElement("div",{className:ki.embedActionsWrapper},n.createElement(Ii,{isDisabled:t,canInsertBlocks:a})))},Oi={nativeSticky:l.css(bi||(bi=j(["\n    position: -webkit-sticky;\n    position: sticky;\n    top: -1px;\n    z-index: 2;\n  "])))},Di=function(e){return n.createElement("div",{className:e.isDisabled?"":Oi.nativeSticky},e.children)},Bi=function(e){return"set_selection"!==e.type},xi=["sdk","isInitiallyDisabled","onAction"],Ri=function(e){var r,i,s,m,E,y,h=W(e.sdk),v=n.useMemo((function(){var t,n,r,i,l,s,m,E,y;return n=e.sdk,r=null!=(t=e.onAction)?t:c,[a.createDeserializeHtmlPlugin(),a.createDeserializeAstPlugin(),u.createDeserializeDocxPlugin(),fi(r),(E=[o.BLOCKS.EMBEDDED_ENTRY,o.BLOCKS.EMBEDDED_ASSET,o.BLOCKS.HR,o.INLINES.EMBEDDED_ENTRY],y={TABLE:[o.INLINES.EMBEDDED_ENTRY]},{key:"DragAndDropPlugin",handlers:{onDrop:function(e){return function(t){var n=Array.from(a.getNodes(e,{match:function(e){return E.includes(null==e?void 0:e.type)}}))[0];if(!n)return!1;var r=n[0];if(!t.nativeEvent.target)return!1;var i=function(e){var t=[];for(t.push(e);e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t}(t.nativeEvent.target).some((function(e){var t;return!(!y[e.nodeName]||null!=(t=y[e.nodeName])&&t.includes(r.type))}));return i||e.history.undos.push([]),i}}}}),{key:"SlashCommands",type:"SlashCommands",handlers:{onClick:function(e){return function(){Br(e.id)}},onKeyDown:function(e){return function(t){Br(e.id),"/"===t.key&&document.dispatchEvent(new CustomEvent("open-rte-palette-commands",{detail:{editorId:e.id}}))}}}},(m={type:o.BLOCKS.PARAGRAPH,component:vr,options:{hotkey:["mod+opt+0"]},handlers:{onKeyDown:gr},softBreak:[{hotkey:"shift+enter",query:{allow:o.BLOCKS.PARAGRAPH}}],deserializeHtml:{rules:[{validNodeName:["P","DIV"]}],query:function(e){return!(""===e.textContent||(t=e,t.hasAttribute("data-embedded-entity-inline-id")||t.hasAttribute("data-entity-type")));var t}},normalizer:[{validChildren:function(e,t){return de(t[0])},transform:(s={},s[o.BLOCKS.PARAGRAPH]=Ht,s.default=Ft,s)}]},k.createParagraphPlugin(m)),N.createListPlugin({normalizer:[{match:{type:[o.BLOCKS.UL_LIST,o.BLOCKS.OL_LIST]},validChildren:[o.BLOCKS.LIST_ITEM],transform:Mt(o.BLOCKS.LIST_ITEM)}],overrideByKey:(l={},l[N.ELEMENT_UL]={type:o.BLOCKS.UL_LIST,component:On,handlers:{onKeyDown:Pn},withOverrides:Vn},l[N.ELEMENT_OL]={type:o.BLOCKS.OL_LIST,component:Dn,handlers:{onKeyDown:Pn}},l[N.ELEMENT_LIC]={type:o.BLOCKS.PARAGRAPH},l[N.ELEMENT_LI]={type:o.BLOCKS.LIST_ITEM,component:xn,normalizer:[{validNode:Mn,transform:Fn},{validNode:zn,transform:qn},{validChildren:o.LIST_ITEM_BLOCKS,transform:Pt},{validNode:Gn,transform:jn}]},l)}),{key:o.BLOCKS.HR,type:o.BLOCKS.HR,isVoid:!0,isElement:!0,component:Jt,handlers:{onKeyDown:$t},deserializeHtml:{rules:[{validNodeName:["HR"]},{validAttribute:{"data-void-element":o.BLOCKS.HR}}],withoutChildren:!0}},Wt(),Or(),yi(),ze(n),Ge(n),Cn(n),Je(n),{key:"Marks",plugins:[b.createBoldPlugin({type:o.MARKS.BOLD,component:er,options:{hotkey:["mod+b"]},handlers:{onKeyDown:$n(o.MARKS.BOLD)},deserializeHtml:{rules:[{validNodeName:["STRONG","B"]},{validStyle:{fontWeight:["600","700","bold"]}}],query:function(e){return!function(e){return e.id.startsWith("docs-internal-guid")&&"B"===e.nodeName}(e)&&!a.someHtmlElement(e,(function(e){return"normal"===e.style.fontWeight}))}}}),b.createCodePlugin({type:o.MARKS.CODE,component:rr,options:{hotkey:["mod+/"]},handlers:{onKeyDown:$n(o.MARKS.CODE)},deserializeHtml:{rules:[{validNodeName:["CODE","PRE"]},{validStyle:{fontFamily:["Consolas","monospace"]}}]}}),b.createItalicPlugin({type:o.MARKS.ITALIC,component:ar,options:{hotkey:["mod+i"]},handlers:{onKeyDown:$n(o.MARKS.ITALIC)},deserializeHtml:{rules:[{validNodeName:["I","EM"]},{validStyle:{fontStyle:"italic"}}],query:function(e){return!a.someHtmlElement(e,(function(e){return"normal"===e.style.fontStyle}))}}}),b.createUnderlinePlugin({type:o.MARKS.UNDERLINE,component:sr,options:{hotkey:["mod+u"]},handlers:{onKeyDown:$n(o.MARKS.UNDERLINE)},deserializeHtml:{rules:[{validNodeName:["U"]},{validStyle:{textDecoration:["underline"]}}],query:function(e){return!a.someHtmlElement(e,(function(e){return"none"===e.style.textDecoration}))}}})]},x.createTrailingBlockPlugin({options:{type:o.BLOCKS.PARAGRAPH,level:0}}),{key:"TextPlugin",handlers:{onMouseUp:function(e){return function(){e.selection&&p.Transforms.setSelection(e,p.Editor.unhangRange(e,e.selection))}}},withOverrides:function(e){var t=e.insertText;e.insertText=function(n){var r=e.selection;if(r&&p.Range.isCollapsed(r)){var i,o=null==(i=p.Editor.above(e,{match:function(t){return p.Editor.isInline(e,t)},mode:"highest"}))?void 0:i[1];if(o&&p.Editor.isEnd(e,r.anchor,o)){var a=p.Editor.after(e,o);p.Transforms.setSelection(e,{anchor:a,focus:a})}}return t(n)};var n=e.deleteForward,r=e.deleteBackward;return e.deleteBackward=function(t){vi(t,e,r)},e.deleteForward=function(t){vi(t,e,n)},function(e){e.insertTextData=function(t){var n=t.getData("text/plain");if(!n)return!1;for(var r,i=!1,o=U(n.split(/\n{2}/));!(r=o()).done;){var a=r.value;/^(\r\n?|\n)$/.test(a)||(i&&p.Transforms.splitNodes(e,{always:!0}),e.insertText(a),i=!0)}return!0}}(e),e}},{key:"VoidsPlugin",exitBreak:[{hotkey:"enter",before:!0,query:{filter:function(e){var t=e[0],n=e[1];return ne(n)&&a.isFirstChild(n)&&!!t.isVoid}}},{hotkey:"enter",level:-2,query:{filter:function(e){var t=e[0],n=e[1];return!(ne(n)&&a.isFirstChild(n)||!t.isVoid)}}}]},A.createSelectOnBackspacePlugin({options:{query:{allow:[o.INLINES.EMBEDDED_ENTRY]}}}),{key:"PasteHTMLPlugin",withOverrides:function(e){var t=e.insertData;return e.insertData=function(e){return t(function(e){if(!e.getData("application/x-slate-fragment")){var t=function(e){return(e.getData("text/html").match(Tr)||[])[1]}(e);if(t){var n=new DataTransfer;return e.types.forEach((function(t){n.setData(t,e.getData(t))})),n.setData("application/x-slate-fragment",t),n}}return e}(e))},e},inject:{pluginsByKey:(i={},i[a.KEY_DESERIALIZE_HTML]={editor:{insertData:{format:"text/html",transformData:Sr}}},i)}},d.createSoftBreakPlugin({then:function(e){return{options:{rules:e.plugins.flatMap((function(e){return e.softBreak||[]}))}}}}),d.createExitBreakPlugin({options:{rules:[]},then:function(e){return{options:{rules:e.plugins.flatMap((function(e){return e.exitBreak||[]}))}}}}),f.createResetNodePlugin({options:{rules:[]},then:function(e){for(var t,n=e.plugins.flatMap((function(e){return e.resetNode||[]})),r=U(n);!(t=r()).done;){var i=t.value;i.defaultType||(i.defaultType=o.BLOCKS.PARAGRAPH)}return{options:{rules:n}}}}),{key:"NormalizerPlugin",withOverrides:yr}]}),[e.sdk,e.onAction]),g=t.useState(!0),L=g[0],S=g[1],T=t.useState(!1),C=T[1],I=(i=(r={editorId:h,handler:e.onChange,skip:T[0]||L,onSkip:function(){return C(!1)}}).editorId,m=r.skip,E=r.onSkip,y=t.useMemo((function(){return R((function(e){null==s||s(D.toContentfulDocument({document:e,schema:ci}))}),500)}),[s=r.handler]),t.useCallback((function(e){var t=a.getPlateSelectors(i).editor();if(!t)throw new Error("Editor change callback called but editor not defined. Editor id: "+i);if((null==t?void 0:t.operations.filter(Bi)).length>0){if(m)return void(null==E||E());y(e)}}),[i,y,m,E]));t.useEffect((function(){S(!1);var t=a.getPlateSelectors(h).editor();t&&(C(!0),function(e,t){p.Editor.withoutNormalizing(e,(function(){[].concat(e.children).forEach((function(t){return e.apply({type:"remove_node",path:[0],node:t})})),t&&(p.Node.isNode(t)?[t]:t).forEach((function(t,n){return e.apply({type:"insert_node",path:[n],node:t})}));var n=p.Editor.end(e,[]);n&&p.Transforms.select(e,n)}))}(t,Si(e.value)))}),[e.value,h]);var O=l.cx(Ni.editor,void 0!==e.minHeight?l.css({minHeight:e.minHeight}):void 0,e.isDisabled?Ni.disabled:Ni.enabled,e.isToolbarHidden&&Ni.hiddenToolbar);return t.useEffect((function(){var t,n;L&&a.getPlateActions(h).value((t=Si(e.value),(n=a.createPlateEditor({plugins:v,disableCorePlugins:gi})).children=t,p.Editor.normalize(n,{force:!0}),n.children))}),[L,v,h,e.value]),n.createElement(he,{sdk:e.sdk},n.createElement(Q,{value:h},n.createElement("div",{className:Ni.root,"data-test-id":"rich-text-editor"},n.createElement(a.Plate,{id:h,plugins:v,disableCorePlugins:gi,editableProps:{className:O,readOnly:e.isDisabled},onChange:I},!e.isToolbarHidden&&n.createElement(Di,{isDisabled:e.isDisabled},n.createElement(Ai,{isDisabled:e.isDisabled})),n.createElement(xr,{editorId:h})))))};function wi(e){var t=e.sys;return{sys:{id:t.id,type:"Link",linkType:t.type}}}var Ki=function(e){function t(t){var n,r;(r=e.call(this,t)||this).handleSubmit=function(e){e.preventDefault(),r.props.onClose(r.getValue())},r.selectEntry=_(ke.mark((function e(){var t,n,i;return ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=r.props.entitySelectorConfigs.Entry).locale,i=t.contentTypes,e.next=3,r.props.sdk.dialogs.selectSingleEntry({locale:n,contentTypes:i});case 3:r.setTargetEntity("Entry",e.sent);case 5:case"end":return e.stop()}}),e)}))),r.selectAsset=_(ke.mark((function e(){var t;return ke.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.entitySelectorConfigs.Asset.locale,e.next=3,r.props.sdk.dialogs.selectSingleAsset({locale:t});case 3:r.setTargetEntity("Asset",e.sent);case 5:case"end":return e.stop()}}),e)})));var i=t.value,o=i.text,a=i.type,l=i.uri,s=i.target,c=Boolean(s),u=((n={}).Entry=null,n.Asset=null,n),d=a;return c?u[d=s.sys.linkType]=s:d=t.allowedHyperlinkTypes.includes("uri")?"uri":t.allowedHyperlinkTypes[0],r.state={text:o,uri:l,entityLinks:u,type:d},r}H(t,e);var i=t.prototype;return i.setTargetEntity=function(e,t){this.setState((function(n){var r;return{entityLinks:P({},n.entityLinks,(r={},r[e]=t?wi(t):void 0,r))}}))},i.getValue=function(){var e=this.state,t=e.text,n=e.type,r=e.uri,i={type:n};return t&&(i.text=t),"uri"===n?i.uri=r:i.target=this.state.entityLinks[n],i},i.isLinkComplete=function(){var e=this.getValue();return!(!this.props.hideText&&!e.text)&&("uri"===e.type&&e.uri||e.target)},i.render=function(){var e=this,t=this.props.labels;return n.createElement(r.EntityProvider,{sdk:this.props.sdk},n.createElement(n.Fragment,null,n.createElement(h.ModalContent,null,this.renderFields()),n.createElement(h.ModalControls,null,n.createElement(h.Button,{type:"button",onClick:function(){return e.props.onClose(null)},variant:"secondary",testId:"cancel-cta",size:"small"},"Cancel"),n.createElement(h.Button,{type:"submit",variant:"positive",onClick:this.handleSubmit,isDisabled:!this.isLinkComplete(),testId:"confirm-cta",size:"small"},t.confirm))))},i.renderFields=function(){var e=this,t=this.props,r=t.hideText,i=t.allowedHyperlinkTypes,o=t.entitySelectorConfigs,a=this.state,l=a.uri,s=a.text,c=a.type,u="uri"===c&&(r||!!s);return n.createElement(h.Form,null,r?null:n.createElement(h.FormControl,{id:"link-text",isRequired:!0},n.createElement(h.FormControl.Label,null,"Link text"),n.createElement(h.TextInput,{testId:"link-text-input",name:"link-text",value:s||"",onChange:function(t){return e.setState({text:t.target.value})},autoFocus:!u})),function(e){return void 0===e&&(e={}),!!e.Entry||!!e.Asset}(o)&&n.createElement(h.FormControl,{id:"link-type",name:"link-type"},n.createElement(h.FormControl.Label,null,"Link type"),n.createElement(h.Select,{value:c,onChange:function(t){return e.setState({type:t.target.value})},testId:"link-type-select"},i.includes("uri")||"uri"===c?n.createElement(h.Select.Option,{value:"uri"},"URL"):null,i.includes("Entry")||"Entry"===c?n.createElement(h.Select.Option,{value:"Entry"},"Entry"):null,i.includes("Asset")||"Asset"===c?n.createElement(h.Select.Option,{value:"Asset"},"Asset"):null)),"uri"===c?n.createElement(h.FormControl,{id:"link-uri",isRequired:!0},n.createElement(h.FormControl.Label,null,"Link target"),n.createElement(h.TextInput,{testId:"link-target-input",name:"link-uri",value:l||"",placeholder:"https://",onChange:function(t){return e.setState({uri:t.target.value})},autoFocus:u}),n.createElement(h.FormControl.HelpText,null,"A protocol may be required, e.g. https://")):this.renderEntityField())},i.renderEntityField=function(){var e=this,t=this.state,r=t.type,i=t.entityLinks[r],o=!i;return n.createElement("div",null,n.createElement(h.FormLabel,{required:!0,htmlFor:""},"Link target"),!o&&n.createElement(h.TextLink,{as:"button",className:l.css({marginLeft:T.spacingS}),onClick:function(){return e.setTargetEntity(r,null)}},"Remove selection"),i&&n.createElement("div",null,"Entry"===r&&n.createElement(Ne,{sdk:this.props.sdk,locale:this.props.entitySelectorConfigs.Entry.locale,entryId:i.sys.id,isDisabled:!0,isSelected:!1}),"Asset"==r&&n.createElement(Se,{sdk:this.props.sdk,locale:this.props.entitySelectorConfigs.Asset.locale,assetId:i.sys.id,isDisabled:!0,isSelected:!1})),o&&this.renderEntitySelector(r,o))},i.renderEntitySelector=function(e){return n.createElement("div",{className:l.css({marginTop:T.spacingS})},"Entry"===e&&n.createElement(h.TextLink,{as:"button",onClick:this.selectEntry},"Select entry"),"Asset"===e&&n.createElement(h.TextLink,{as:"button",onClick:this.selectAsset},"Select asset"))},t}(n.Component);Ki.propTypes={sdk:w.object.isRequired,labels:w.shape({title:w.string,confirm:w.string}),value:w.shape({text:w.string,uri:w.string,target:w.object,type:w.oneOf(["uri","Entry","Asset"])}),entitySelectorConfigs:w.object,allowedHyperlinkTypes:w.arrayOf(w.oneOf(["Entry","Asset","uri"])),hideText:w.bool,onClose:w.func.isRequired},Ki.defaultProps={labels:{title:"Insert link",confirm:"Insert link"},value:{},hideText:!1,entitySelectorConfigs:{},allowedHyperlinkTypes:["Entry","Asset","uri"]},exports.ConnectedRichTextEditor=Ri,exports.RichTextEditor=function(e){var a=e.sdk,l=e.isInitiallyDisabled,c=e.onAction,u=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}(e,xi),d=t.useCallback((function(e){return!e||s(e,o.EMPTY_DOCUMENT)}),[]),f=W(e.sdk);return n.createElement(r.EntityProvider,{sdk:a},n.createElement(i.FieldConnector,{throttle:0,field:a.field,isInitiallyDisabled:l,isEmptyValue:d,isEqualValues:s},(function(e){return n.createElement(Ri,Object.assign({},u,{key:"rich-text-editor-"+f,value:e.lastRemoteValue,sdk:a,onAction:c,isDisabled:e.disabled,onChange:e.setValue}))})))},exports.openRichTextDialog=function(e){return function(t){var r;return"rich-text-hyperlink-dialog"===(null==(r=t.parameters)?void 0:r.type)?i.ModalDialogLauncher.openDialog(t,(function(r){return n.createElement(Ki,Object.assign({},t.parameters,{onClose:r.onClose,sdk:e}))})):Promise.reject()}},exports.renderRichTextDialog=function(e){var t=e.parameters.invocation;return"rich-text-hyperlink-dialog"===(null==t?void 0:t.type)?(e.window.startAutoResizer(),n.createElement(Ki,Object.assign({},e.parameters.invocation,{onClose:e.close,sdk:e}))):n.createElement("div",null)};
//# sourceMappingURL=field-editor-rich-text.cjs.production.min.js.map
